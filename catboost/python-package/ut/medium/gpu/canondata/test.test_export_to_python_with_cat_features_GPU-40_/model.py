### Types to hold CTR's data

class catboost_model_ctr(object):
    def __init__(self, base_hash, base_ctr_type, target_border_idx, prior_num, prior_denom, shift, scale):
        self.base_hash = base_hash
        self.base_ctr_type = base_ctr_type
        self.target_border_idx = target_border_idx
        self.prior_num = prior_num
        self.prior_denom = prior_denom
        self.shift = shift
        self.scale = scale

    def calc(self, count_in_class, total_count):
        ctr = (count_in_class + self.prior_num) / float(total_count + self.prior_denom)
        return (ctr + self.shift) * self.scale


class catboost_bin_feature_index_value(object):
    def __init__(self, bin_index, check_value_equal, value):
        self.bin_index = bin_index
        self.check_value_equal = check_value_equal
        self.value = value


class catboost_ctr_mean_history(object):
    def __init__(self, sum, count):
        self.sum = sum
        self.count = count


class catboost_ctr_value_table(object):
    def __init__(self, index_hash_viewer, target_classes_count, counter_denominator, ctr_mean_history, ctr_total):
        self.index_hash_viewer = index_hash_viewer
        self.target_classes_count = target_classes_count
        self.counter_denominator = counter_denominator
        self.ctr_mean_history = ctr_mean_history
        self.ctr_total = ctr_total

    def resolve_hash_index(self, hash):
        try:
            return self.index_hash_viewer[hash]
        except KeyError:
            return None


class catboost_ctr_data(object):
    def __init__(self, learn_ctrs):
        self.learn_ctrs = learn_ctrs


class catboost_projection(object):
    def __init__(self, transposed_cat_feature_indexes, binarized_indexes):
        self.transposed_cat_feature_indexes = transposed_cat_feature_indexes
        self.binarized_indexes = binarized_indexes


class catboost_compressed_model_ctr(object):
    def __init__(self, projection, model_ctrs):
        self.projection = projection
        self.model_ctrs = model_ctrs


class catboost_model_ctrs_container(object):
    def __init__(self, used_model_ctrs_count, compressed_model_ctrs, ctr_data):
        self.used_model_ctrs_count = used_model_ctrs_count
        self.compressed_model_ctrs = compressed_model_ctrs
        self.ctr_data = ctr_data


###  Model data
class catboost_model(object):
    float_features_index = [
        0, 1, 2, 3, 4, 5,
    ]
    float_feature_count = 6
    cat_feature_count = 11
    binary_feature_count = 35
    tree_count = 40
    float_feature_borders = [
        [27.5, 36.5, 38.5, 41.5, 46.5, 51.5, 53.5],
        [51773, 59723, 121010, 202819.5, 215061, 215992, 222939, 260912, 288417.5, 313025.5, 325462],
        [9.5, 10.5, 11.5, 12.5, 13.5, 15.5],
        [1087, 3280],
        [1738],
        [42, 44.5, 46.5, 55]
    ]
    tree_depth = [6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6]
    tree_split_border = [7, 2, 2, 4, 4, 2, 2, 3, 2, 2, 1, 4, 1, 4, 4, 1, 1, 1, 2, 2, 4, 1, 7, 3, 3, 2, 4, 1, 1, 1, 1, 2, 3, 2, 3, 255, 2, 7, 1, 3, 2, 1, 3, 4, 4, 3, 4, 4, 1, 2, 5, 1, 6, 3, 4, 2, 2, 5, 1, 1, 2, 1, 1, 4, 11, 3, 2, 5, 2, 4, 5, 6, 3, 1, 4, 1, 4, 6, 2, 3, 3, 2, 3, 3, 3, 2, 2, 3, 10, 2, 1, 3, 1, 1, 1, 1, 2, 1, 3, 1, 3, 6, 1, 2, 2, 5, 11, 3, 1, 3, 1, 4, 4, 1, 2, 1, 3, 5, 3, 5, 1, 2, 255, 4, 5, 2, 1, 2, 3, 3, 3, 3, 2, 6, 1, 2, 2, 8, 2, 1, 5, 1, 2, 3, 2, 5, 6, 3, 2, 1, 3, 4, 5, 2, 4, 3, 1, 1, 3, 1, 1, 2, 1, 3, 1, 3, 2, 1, 1, 2, 2, 6, 3, 5, 1, 6, 2, 3, 9, 2, 1, 2, 4, 5, 5, 5, 2, 2, 4, 3, 3, 2, 1, 1, 2, 1, 2, 5, 1, 1, 3, 1, 2, 3, 2, 2, 1, 4, 2, 4, 1, 1, 1, 2, 4, 7, 2, 4, 3, 4, 2, 4, 6, 4, 3, 3, 2, 3, 1, 1, 1, 2, 1, 3, 2, 1, 1, 1, 1, 2]
    tree_split_feature_index = [17, 19, 12, 14, 22, 21, 10, 15, 30, 13, 34, 11, 8, 0, 20, 31, 18, 32, 3, 26, 7, 33, 25, 9, 5, 16, 24, 23, 28, 27, 29, 3, 5, 30, 21, 6, 0, 0, 18, 12, 20, 11, 25, 8, 23, 2, 11, 17, 8, 29, 13, 18, 1, 19, 17, 2, 19, 24, 3, 30, 8, 4, 1, 9, 1, 11, 3, 2, 7, 14, 17, 1, 25, 0, 14, 28, 1, 22, 10, 0, 27, 27, 29, 10, 5, 17, 3, 10, 1, 14, 24, 13, 14, 26, 1, 5, 3, 15, 33, 1, 5, 24, 34, 30, 9, 2, 1, 15, 25, 22, 13, 14, 25, 18, 24, 16, 10, 22, 12, 17, 10, 3, 6, 14, 8, 0, 20, 26, 2, 1, 23, 21, 3, 0, 16, 0, 10, 1, 3, 9, 2, 12, 22, 28, 3, 2, 17, 8, 1, 5, 25, 5, 2, 28, 0, 5, 13, 25, 24, 16, 27, 23, 25, 24, 18, 21, 11, 5, 1, 14, 25, 2, 14, 25, 1, 25, 26, 20, 1, 5, 34, 3, 2, 17, 22, 0, 26, 22, 25, 12, 14, 33, 1, 22, 3, 15, 15, 1, 10, 1, 12, 7, 3, 31, 3, 10, 21, 9, 5, 24, 25, 29, 15, 15, 24, 1, 32, 24, 25, 13, 31, 29, 8, 33, 17, 7, 2, 16, 25, 10, 15, 15, 27, 23, 3, 1, 2, 17, 19, 26]
    tree_split_xor_mask = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 254, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 254, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    cat_features_index = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
    one_hot_cat_feature_index = [9]
    one_hot_hash_values = [
        [-1291328762]
    ]
    ctr_feature_borders = [
        [0.0545212775, 0.381648958, 0.599734068, 0.708776593],
        [0.255357146, 0.514285684, 0.669642866, 0.773214281, 0.824999988, 0.876785696],
        [0.25, 0.5, 0.800000012, 0.850000024],
        [0.0294117667, 0.0539215691, 0.377451003],
        [0.0572916679, 0.34375, 0.401041687, 0.515625],
        [0.3828125, 0.471354157, 0.78125],
        [0.4375, 0.475000024, 0.512499988, 0.700000048, 0.850000024],
        [0.0147058833, 0.0735294148, 0.142156869, 0.191176474],
        [0.243243247, 0.364864886, 0.608108103],
        [0.428716242, 0.600337863, 0.771959484],
        [0.512499988, 0.587499976, 0.625, 0.662500024, 0.700000048, 0.737500012, 0.925000072],
        [0.387254894],
        [0.403846145, 0.461538464, 0.634615362],
        [0.561298072, 0.694711506, 0.739182711, 0.917067289],
        [0.5625, 0.84375, 0.9375],
        [0.0147058833, 0.0539215691, 0.0784313753, 0.102941178, 0.117647067, 0.142156869],
        [0.0596590899, 0.298295438, 0.417613626, 0.596590877],
        [0.284801126, 0.338068187, 0.391335249, 0.604403436, 0.657670498, 0.764204562],
        [0.4375, 0.53125, 0.578125, 0.625, 0.671875, 0.71875, 0.765625],
        [0.176470593, 0.284313738],
        [0.6875, 0.744791687, 0.802083373],
        [0.7578125, 0.786458313, 0.84375],
        [0.7421875, 0.7890625, 0.8125, 0.8359375],
        [0.0343137272, 0.0882352963],
        [0.376096487, 0.752192974, 0.805921078],
        [0.786458373, 0.890625],
        [0.729166687, 0.791666687, 0.833333373, 0.854166687],
        [0.0147058833]
    ]

    ## Aggregated array of leaf values for trees. Each tree is represented by a separate line:
    leaf_values = [
        0, 0, 0, 0, 0, 0, 0, 0.02706871181726456, 0, 0, 0, 0, 0, 0, 0.01353435590863228, 0.02165497094392776, -0.1215016096830368, 0.02706871181726456, -0.04860064387321472, 0, -0.05577795207500458, 0.02165497094392776, -0.04860064387321472, 0.03383589163422585, 0, 0, 0, 0, -0.05577795207500458, 0.03093567118048668, 0.03093567118048668, 0.02706871181726456, 0, 0, 0, 0.01353435590863228, -0.02805303037166595, 0.02706871181726456, 0.02165497094392776, 0.03609161451458931, 0, 0, 0, 0, 0, 0.02706871181726456, -0.0743706077337265, 0.03383589163422585, 0, 0, -0.04860064387321472, 0.01353435590863228, 0.01353435590863228, -0.01435462106019258, -0.05577795207500458, 0.03789619728922844, 0, 0, 0, 0, 0, 0.01353435590863228, -0.005816418677568436, 0.03937267139554024,
        0, 0, 0, 0, 0, 0, 0, 0, 0, -0.0468575693666935, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.04105114191770554, -0.06618896126747131, 0, 0.01896390505135059, 0, 0.011612169444561, 0, 0.02482615783810616, -0.07257258147001266, -0.009011588990688324, 0, 0.02839769795536995, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.02717494033277035, 0.01129180286079645, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.01862752437591553, -0.08565447479486465, -0.008522841148078442, 0.01889663003385067, 0.04271475598216057,
        0, 0.027931097894907, 0, 0, 0, 0, 0, 0, 0.01067411620169878, 0.03514942154288292, 0, 0.03338486701250076, 0, 0.02315166778862476, 0, 0.01650181598961353, -0.04394607245922089, -0.02447331510484219, 0, -0.04997799918055534, 0, 0, 0, 0, 0, -0.00193133729044348, -0.0932389497756958, -0.04387916252017021, 0, 0, -0.03865748271346092, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.009198357351124287, 0, 0.009527313522994518, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.04049120843410492, -0.04345005750656128, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, -0.03625550121068954, 0, -0.07467298954725266, -0.03401933610439301, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.02218189090490341, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.02793801017105579, 0, 0.0176496896892786, 0, 0, 0, 0, 0, -0.0377647764980793, -0.04072362557053566, 0.02010440081357956, 0, -0.009834252297878265, -0.0858239084482193, 0.01325071696192026, 0, -0.03796616196632385, 0, 0.01569262146949768, 0, 0, 0, 0.01276696752756834, -0.03577399626374245, 0, 0, 0.02822747454047203, 0, 0, 0,
        -0.02403656765818596, -0.03560713678598404, 0.01597687415778637, 0, 0, 0, 0, 0, 0.03602469339966774, 0, 0, 0, 0.008832826279103756, 0, 0.02031704597175121, 0.01242738403379917, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.005745719186961651, 0, 0.01655302569270134, 0, 0, 0, 0, 0, 0, 0, -0.003482506610453129, -0.08382721245288849, 0, 0, -0.02645874954760075, -0.04123746603727341, 0.01984021998941898, 0.01456906646490097, 0, 0, 0, 0, 0, 0, 0, 0, -0.02936903946101665, -0.03333547711372375, 0, 0, 0.009514365345239639, -0.03019237332046032, 0.02089297957718372, 0,
        0.006138838361948729, 0.005219187587499619, 0, 0, 0, 0, 0, 0, 0.01988242752850056, 0.01222637481987476, 0, 0, 0, 0.004310355056077242, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.001978818094357848, 0.00365292327478528, 0, 0, 0.01165520865470171, 0, 0, 0, 0, 0.005870343185961246, 0, 0, 0, 0, 0, 0, 0.03345298767089844, -0.003838682547211647, -0.07177736610174179, -0.03472136706113815, -0.05285603925585747, -0.06166703253984451, 0, -0.0266969408839941, 0.005074223969131708, -0.0142435971647501, 0, 0, 0, 0, 0, 0, 0.01135794073343277, 0.02294901944696903, 0, -0.03636841848492622, 0.02463577501475811, -0.04936884716153145, 0, 0,
        0.01093101222068071, 0.01067138649523258, 0, 0.01138260588049889, -0.0341971330344677, -0.03802238032221794, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.01603978872299194, 0.004457296337932348, 0, 0.01043225545436144, 0, -0.03032715246081352, 0, -0.02524883672595024, 0, 0, 0, 0, 0, 0, 0, 0, 0.009469872340559959, 0.006164440885186195, 0, 0.01129575353115797, -0.02771462686359882, -0.0687258392572403, 0, 0, 0.01319750212132931, 0.005872309673577547, 0, 0.004540219902992249, -0.005386726930737495, -0.01446227543056011, 0, -0.04919086396694183, 0.008021213114261627, 0.003669995348900557, 0, 0, 0.0284649059176445, 0.01903531886637211, 0, 0, 0.013324324041605, 0.003238292876631021, 0, 0.01860377006232738, 0.03490756824612617, -0.03372218832373619, 0, -0.01525310985743999,
        0, 0, 0.02850052528083324, 0.02075406350195408, 0, -0.02367999963462353, 0, 0, -0.01266082003712654, -0.04985466226935387, -0.06137450784444809, -0.01682575605809689, 0, 0, 0, 0, -0.01945420354604721, -0.030140470713377, -0.0002566878101788461, 0.003644601907581091, 0, 0, 0, 0, -0.02409037388861179, 0, -0.0312744714319706, 0, 0, 0, 0, 0, 0, 0.01159569807350636, 0, 0.01103437598794699, 0, 0, 0, 0.01103974040597677, 0, -0.02476464211940765, 0, 0.01067534927278757, 0, 0.01043121237307787, 0, 0.01142543088644743, 0, 0, 0, 0, 0, 0.01466086599975824, 0, 0.01054340600967407, 0, 0, 0, 0.005794557742774487, 0, 0.004718214273452759, 0, 0.008593940176069736,
        0.005133269354701042, 0.0071298498660326, 0, 0.01329719461500645, 0, 0.01368866674602032, 0, 0.007739785593003035, 0, -0.02733080834150314, 0, 0, 0, -0.04265359789133072, 0, -0.03966886177659035, 0, 0.002827567281201482, 0, 0.003917628433555365, 0, 0.01112230960279703, 0, 0, 0, -0.0250623244792223, -0.02006450109183788, 0, -0.02465936541557312, 0.0291165541857481, -0.04279540851712227, -0.01237452868372202, 0, 0.008898068219423294, 0, 0.007130548357963562, 0, 0.004503004252910614, 0, 0.01200026459991932, 0, -0.01011535152792931, 0, 0, -0.05368688702583313, -0.00232449290342629, 0, -0.01274721045047045, 0, 0.002907978370785713, 0, 0.001953240483999252, 0, 0.008439464494585991, 0, 0.001378292567096651, 0, 0.03010486252605915, 0, 0.01249424461275339, 0, 0.02576660178601742, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.005783236119896173, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.006718130316585302, 0.008596736937761307, -0.03880253434181213, -0.01551653165370226, 0.01189136318862438, 0.007087813224643469, -0.03082333691418171, 0, 0, 0.00486563378944993, 0, 0.01270569860935211, 0, 0.009622729383409023, 0, 0.007678964640945196, -0.03091152384877205, 0, -0.0249139592051506, 0, -0.03300052508711815, 0, -0.0373537614941597, 0, 0, 0, -0.01838107779622078, 0, 0, 0, 0, -0.0003653907333500683,
        0, 0, 0, 0, -0.02001086249947548, 0.005423893220722675, 0, 0, 0, 0, 0, 0, -0.05014035478234291, 0.003360616508871317, 0, -0.03683816269040108, 0, 0, 0, 0, -0.02621552720665932, 0, 0, 0, 0, 0, 0, 0, 0.008062579669058323, 0.01363312173634768, 0.01763478666543961, 0, 0, -0.0008321323548443615, 0, 0, -0.03248518332839012, 0.001718921819701791, -0.0256707277148962, 0.001231173402629793, 0, -0.02961883880198002, 0, 0, 0.003309560008347034, 0.008802144788205624, 0, 0, 0, 0, 0, 0, 0.001336575951427221, 0.0165136344730854, 0, 0, 0, 0, 0, 0, 0.0008379728533327579, 0.01030482910573483, 0, 0,
        0, -0.01491824071854353, -0.01861617527902126, -0.01412349753081799, 0.02881738916039467, -0.03930655866861343, -0.03226028382778168, 0, -0.0393034853041172, 0, 0, 0, 0.0054307053796947, -0.04847567901015282, 0, 0, 0.003620127215981483, 0, -0.0222849790006876, 0, 0.00991476234048605, 0, 0.01305027492344379, 0, 0, 0, 0, 0, 0.005097508430480957, 0, 0, 0, -0.03278207406401634, 0, 0.001100500929169357, 0, 0.02253612689673901, 0, -0.03981386125087738, 0, -0.02152611874043941, 0, 0, 0, 0.03409745916724205, 0, 0, 0, 0.007561610080301762, 0, 0, 0, 0.005358658265322447, 0, 0, 0, 0.003428902709856629, 0, 0, 0, 0.001672304468229413, 0, 0, 0,
        0, 0.008134366944432259, -0.01377644389867783, -0.007230967283248901, 0, 0.005665063858032227, -0.02129051275551319, 0.001190975192002952, 0, 0.0009521283791400492, 0, 0.009181506931781769, 0, 0.0003715805651154369, -0.009841473773121834, 0, 0, 0.001099547720514238, -0.01660539954900742, 0.0102787846699357, 0.01020117569714785, 0.0006900480948388577, -0.0110872657969594, 0.002938351593911648, 0, 0, 0, -0.008813301101326942, 0, 0, 0, -0.03057488985359669, 0.01929084211587906, 0.002220932627096772, -0.0342523567378521, -0.009726954624056816, 0, 0, -0.02261156216263771, 0.01823756098747253, 0, 0, -0.02147053740918636, 0, 0, 0, 0.02110626921057701, 0, 0, 0.002666926477104425, 0.007549994625151157, -0.008592318743467331, 0, -2.522255090298131e-05, 0.02188988961279392, 0.009537356905639172, 0, 0, 0, 0, 0, 0, 0, 0.000103980433777906,
        0.003655859734863043, 0.003580572316423059, -0.0481949970126152, 0.0152996713295579, 0, 0, 0, 0, 0, 0.001708458992652595, 0, -0.02126543968915939, 0, 0, 0, 0, 0, -0.02151793427765369, 0, -0.01607742346823215, 0, 0, 0, 0, 0, 0, 0, -0.01468418724834919, 0.0008724379586055875, 0, 0.008014130406081676, 0.003459705039858818, 0, 0.005449074786156416, 0, -0.006251444574445486, 0, 0, 0, 0, 0, -0.0007425364456139505, 0, -0.03680286556482315, 0, 0, 0, 0, 0, 0, 0, 0.01549245230853558, 0, 0, 0, 0, 0, 0.01193336211144924, 0, 0.01665203459560871, 0, 0.001285898964852095, 0, 0,
        0, -0.01116917096078396, 0.01119552366435528, -0.01081184111535549, 0, 0, 0, 0, 0.02012393437325954, 0, 0.002933818614110351, -0.02103596180677414, 0, 0, 0, 0, -0.002903294051066041, 0, 0, 0, 0, 0, 0, 0, 0.01119188126176596, 0, 0.007327048107981682, 0, 0, 0, 0, 0, -0.02953996323049068, -0.02222988195717335, -0.004971061367541552, 0.003034713212400675, -0.02908330783247948, -0.0114658186212182, 0, 0, 0.03041733242571354, -0.05126980319619179, 0.002834332408383489, 0.01429932750761509, -0.0443144328892231, 0, 0, 0, -0.01650508865714073, 0.022757638245821, 0.0006262973183766007, 0, 0, 0, 0, 0, -0.01740884780883789, 0, 0.001902913907542825, 0.004881366156041622, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.001468058908358216, 0, 0, 0, 0, 0, 0.007108523976057768, 0.01586364582180977, -0.004525903612375259, 0, 0, 0, 0, 0, -0.01056006364524364, -0.02000052109360695, 0.0005840405356138945, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.02321893908083439, 0, 0, 0, 0, 0, 0, 0, 0.008690435439348221, 0, 0, 0, 0.01673219539225101, 0, -0.02245781011879444, 0.0108354464173317, -0.01071810256689787,
        0, 0, 0, 0, 0, 0, 0, 0, 0.0207157414406538, 0, 0.01185580436140299, -0.04146548360586166, -0.02845409698784351, 0, 0.005915184505283833, -0.01827115379273891, 0, 0, -0.02177623100578785, 0, 0, 0, 0, 0, -0.01123889815062284, 0, -0.02390818856656551, -0.01008742116391659, 0, 0, 0, 0, 0, 0, -0.001376840868033469, 0, 0, 0, 0, 0, 0.006905877031385899, 0, 0.002607263624668121, 0, 0, 0, 9.401546412846074e-05, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.009693808853626251, 0, 0, 0, 0, 0,
        0, 0, 0, -0.03409204632043839, 0, 0.001196326804347336, -0.009338640607893467, 0.004999990575015545, 0, 0, 0, -0.009509580209851265, 0, 0, 0, -0.03241197764873505, -0.01698979549109936, 0, 0, 0, 0, 0, 0, 0.02558439783751965, 0, 0, 0, 0, 0, 0, 0, 0.01440536789596081, 0, 0, 0, 0.00290979677811265, 0, 0.005844651721417904, 0.001084976363927126, -0.0001890044513856992, 0, 0, 0, 0.006011825520545244, 0, 0, 0, 0.006387767381966114, 0, 0, 0, -0.0005838177748955786, 0, 0.0004158743540756404, 0, 0.002717176917940378, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.01404040586203337, 0, 0.003505473723635077, 0, 0.006497703958302736, 0, 0, 0, 0, 0, 0.002871503354981542, 0, 0.0001123311012634076, 0, 0, 0, -0.01565779745578766, 0, -0.00193907436914742, 0.008564339019358158, -0.0101336520165205, 0, 0, 0, 0, 0, -0.01474858447909355, 0, -0.0001784786873031408, 0, 0, 0, -0.003846261883154511, 0, 0, 0, -0.02318740822374821, 0, 0, 0, 0, 0, 0, 0, -0.005129324272274971,
        -0.01581364870071411, 0.005235898308455944, 0, 0, 0, 0.009477497078478336, 0, 0.01087100896984339, 0, -0.004950650501996279, 0, -0.01034314185380936, 0.008032192476093769, 0, 0, -0.01472181081771851, 0, 0, 0, -0.009719014167785645, 0, 0.001239913748577237, 0, -0.01862482912838459, 0, -0.01502008084207773, 0, -0.01666861586272717, 0.01446027681231499, 0.0123754907399416, 0, 0.003803453175351024, 0, 0, 0, 0.00423568207770586, 0, 0, 0, 0.004088813904672861, 0, 0, 0, -0.01564622484147549, 0, 0, 0, 0.007872897200286388, 0, 0, 0, 0.005212234798818827, 0, 0, 0, 3.469767398200929e-05, 0, 0, 0, 0.001282348181121051, 0, 0, 0, 0.0009992691921070218,
        0, 0.007926156744360924, 0, 0, 0, -0.01243730168789625, 0, 0, 0, 0.0005412764730863273, 0, 0, 0, 0.002642931183800101, 0, 0, 0, 0.01051998697221279, 0, 0, 0, -0.001193702104501426, 0, -0.01616229303181171, 0, 0.001766505185514688, 0, 0, 0, 0.01248687598854303, 0, 0, 0, -0.003472766373306513, 0, 0, 0, 0.001143634784966707, -0.002964603248983622, -0.005676970817148685, 0, -0.01194098126143217, 0, 0, -0.01408680807799101, 0.005517437122762203, 0, 0, 0, -0.0007934867171570659, 0, 0, 0, -0.0008732146816328168, 0, -0.01437173131853342, 0, 0.000780575443059206, 0, 0, 0, -0.004338523838669062, 0, -0.0330163948237896,
        0, 0, 0, 0, 0.008124140091240406, 0, 0, 0, 0, 0.007785588968545198, 0, 0.009810490533709526, 0.01290812902152538, 0, 0, 0, 0.0007511916337534785, -0.001611274550668895, 0.01576454378664494, -0.007626856211572886, 0, -0.001554047572426498, -0.003216697135940194, 0, -0.001046350109390914, -5.943090582150035e-05, -0.02532322145998478, 0.003262876067310572, 0.002156794304028153, 0.002948789391666651, -0.02730587869882584, -0.0163600742816925, 0, 0.002412689849734306, 0, 0, -0.02313570119440556, 0, 0, 0, 0.005258345045149326, 0, 0.007587368134409189, 0.008112740702927113, 0.001895054243505001, 0.008562964387238026, -0.0006591158453375101, -0.00748229306191206, -0.0002843870024662465, 0.003993361722677946, 0, 0.001254928531125188, 0, -0.001833923626691103, 0, 0, 0.000615142285823822, -0.004121950827538967, 0, -0.001288926810957491, 0.005209705326706171, 0.002791618229821324, 0, 0,
        0, 0, 0, 0, 0.002449888037517667, 0, 0, 0, -0.01624550484120846, 0, 0, 0, -0.01329395547509193, -0.002914410084486008, 0.005869132000952959, -0.004307698924094439, 0.01299477741122246, 0, 0, 0, 0.004300239961594343, -0.01414151675999165, 0, 0, -0.00289213377982378, 0, 0.01126653701066971, 0, -0.01257314626127481, -0.01665035076439381, 0.006875269114971161, -0.02451659739017487, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.01250763516873121, 0, -0.01401732116937637, 0, 0, 0, 0.003089014440774918, 0, 0, 0, 0.01327533461153507, 0, 0.007115927059203386, 0, 0.003752782708033919, 0, 0.002682598074898124, 0,
        0, 0, 0.003103899070993066, 0, 0, 0, 0, 0, 0, 0, -0.01390188094228506, 0, 0, 0, 0.01245047245174646, 0, 0, 0, 0.002159112598747015, 0, 0.006601054221391678, 0, -0.006795276887714863, -0.002733323024585843, -0.01246793661266565, -0.004040040075778961, 0.004534912295639515, -0.03227296471595764, 0, 0, -0.02525677159428596, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.0007887936080805957, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.01201194617897272, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.003253279719501734, 0, 0, 0, -0.02737087942659855, 0, 0, -0.002563487971201539, 0.001822634600102901, 0, -0.0105253616347909, 0, 0.02043944597244263, -0.02323070727288723, -0.01049965713173151, 0, -0.001131929107941687, 0, 0.007614378351718187, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.0195309966802597, 0, 0, 0, 0, 0, 0, 0, 0.01482143439352512, -0.003789012087509036, 0.0007579811499454081, 0, 0.001020901487208903, 0, 0, 0, 0.001480133272707462, -0.01361050084233284, -0.01084661204367876, 0, 0.006916753016412258, 0, 0.004544555675238371, 0,
        0.00636542122811079, 0.0001820552279241383, 0, 0, 0, 0.006844891235232353, 0, 0, 0, 0.001022498239763081, 0, 0, 0, 0, 0, 0, -0.006302704568952322, -0.005609710235148668, 0, 0, 0.001426003756932914, -0.009304369799792767, 0, 0, 0.01439301297068596, 0.003950756974518299, 0, 0, 0, 0, 0, 0, -0.02965239249169827, 0.004767337813973427, 0, 0, -0.001763701904565096, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.01749681495130062, -0.0009627827093936503, 0.02088826522231102, 0, 0, -0.009223689325153828, -0.001616252353414893, 0, 0, 0, 0, 0, 0, -0.005001246929168701, 0, 0,
        0, 0.006691653747111559, 0, 0.0004510193830356002, 0, 0, 0, -0.005059725139290094, 0, 0, 0, 0, 0, 0, 0.007719384506344795, -0.006107388529926538, 0, 0, 0, 0.009351357817649841, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.006416169926524162, 0, 0, 0, 0, 0, 0, 0, 0.004745462909340858, 0, 0, 0, 0, 0, 0, 0, -0.003175062127411366, 0, 0, 0, 0, 0, 0, -0.001292660715989769, -0.00382144027389586,
        0, 0, 0, 0.01099171489477158, 0, 0, 0, -0.009281043894588947, 0, 0, 0, 0.005502027459442616, 0, -0.01100541092455387, 0, -0.009391589090228081, 0, 0, 0, -0.002438295865431428, 0, 0.008770310319960117, 0, 0.01036082301288843, 0, 0, 0, -3.190610004821792e-05, 0, 0, 0, -0.01376085635274649, 0, 0, 0, 0.004915612749755383, 0, 0, 0, -0.009546798653900623, 0, 0, 0, 0.007344935089349747, 0.006275868974626064, 0.01151313725858927, 0, -0.006921120919287205, 0, 0, 0, 0.003669997910037637, 0, 0, 0, -0.02313284203410149, 0, 0, 0, -0.001977368956431746, 0, 0, 0, 0.02568964101374149,
        0, 0.002843567635864019, 0, -0.006506782956421375, 0, 0.007274372968822718, 0, -0.003859859192743897, 0, 0.01079776976257563, 0, 0, 0, 0, 0, 0, 0, 0, -0.01555546931922436, 0.007271446287631989, 0, 0, 0, -0.007590018678456545, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.001480354578234255, -0.000127261140733026, 0, -0.002512418432161212, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.00105323747266084, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0.007773556280881166, 0, -0.002098203869536519, 0, 0.002085197949782014, 0, 0, 0, 0, -0.001388373668305576, -0.0003364314325153828, 0, 0.003261093283072114, 0, 0, 0, 0, 0, 0.001943644601851702, 0, -0.01966669596731663, 0, 0, 0, 0.006128064822405577, 0, -0.001165148918516934, 0, 0.002060913247987628, 0, 0, 0, 0.008795986883342266, 0, 0.00830425787717104, 0, -0.009688219055533409, 0, 0, 0, 0, 0, -0.0005600040312856436, -0.01458892971277237, -0.01074888464063406, 0, -0.004159186035394669, 0, 0, 0, 0, 0, 0.008144035935401917, 0, 0, 0, 0, 0, 0.003134527243673801, 0, 0.01777977682650089, 0, 0,
        -0.005055183079093695, -0.005242407321929932, 0, 0, 0, 0, 0, 0, 0, 0.000985246617347002, 0, 0, 0.0006059575243853033, 0.000725883524864912, 0, 0, 0, 0.02166423760354519, 0, -0.01133535709232092, 0, -0.0009647553088143468, -0.01119732670485973, -0.0008826006087474525, 0, -0.002601296873763204, 0, 0, 0, 0.001993752783164382, 0, 0, 0, -0.003648389596492052, 0, -0.01213852223008871, 0, 0.004576051607728004, 0, 0, 0, 0.004123440012335777, 0, 0, 0, 0, 0, 0, 0, 0.00849600788205862, 0, 0, 0, -0.009422908537089825, 0, -0.005646592006087303, 0, -0.0008663011831231415, 0, 0, 0, -0.002266442868858576, 0, 0,
        0, 0.009336488321423531, 0, 0.003666354808956385, 0.002465798519551754, 0, 0.008245479315519333, -0.004185087978839874, 0, 0, 0, 0, 0, 0, 0.001997828716412187, 0, 0, 0, 0, 0.005015989299863577, -6.963237683521584e-05, 0, 3.323349665151909e-05, 0, 0, 0.008505356498062611, 0.01274054124951363, 0.0005921616684645414, 0.002171223051846027, 0, -0.001564261852763593, 0, 0, -0.008962180465459824, 0, 0, -0.001220104284584522, 0, -0.007817930541932583, -0.008572223596274853, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0002058054233202711, 0, 0, -0.03265563398599625, 0, -0.0124096442013979, 0.002094286493957043, 0, -0.002405460458248854, 0.009114276617765427,
        0, 0, 0, -0.006419354118406773, 0, 0, 0, 0, 0, 0, 0, 0.009010542184114456, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.01198400557041168, 0.002159336814656854, 0, 0, 0, -0.01405697502195835, 0, -0.008405315689742565, 0, 0.01189684495329857, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.001011220505461097, 0, 0.00101136474404484, 0, 0, 0, -0.01066782884299755,
        0, 0, 0, -0.005791444797068834, 0, 0, -0.01077054254710674, -0.009428304620087147, 0, 0, 0, 0.002206476172432303, 0, -0.01079260464757681, 0, 0.004346911329776049, 0, 0, -0.0004666629538405687, 0, 0, 0, 0, 0.0006119446479715407, 0, 0, 0, 0, 0, 0, 0, -0.01936975121498108, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        -0.008946916088461876, 0, 0, 0, -0.0101013146340847, 0, 0.004923901986330748, -0.007653537672013044, 0, 0, 0.00873063039034605, -0.004091671667993069, 0, 0, 0.004040544852614403, -0.008536253124475479, 0, 0, 0, -0.008801443502306938, 0, 0.0005739214248023927, 0.01344294287264347, 0, 0, 0, -0.000837604224216193, 0, -0.003166329814121127, 0, -0.005290110129863024, 0, 0, 0, 0.000134103131131269, 0, -0.007689623162150383, 0, -0.001074205036275089, 0, 0.0002644508786033839, -0.0004376668366603553, 0, 0, 0.004826179705560207, 0, -0.001704722759313881, 0, 0, 0, 0, 0, -0.002498483285307884, 0, -0.001050877966918051, 0, 0, 0, 0.003607527818530798, 0, 0, 0, -0.0007294537499547005, 0,
        0, 0.001844208338297904, 0, -0.01496104802936316, 0, 0.005186411552131176, 0, 0.003756291465833783, 0, 0, 0, 0, 0, 0.0009576196316629648, 0, -0.00700864102691412, 0, 0.003049697726964951, 0, 0.001308467704802752, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.0009542076732032001, 0, -0.0001681194262346253, 0.003899884875863791, 0.01017335243523121, 0, -0.007829146459698677, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.008541961200535297, 0, -0.0001449991250410676, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.001453844713978469, 0, -0.002492314670234919,
        -0.004333473276346922, 0, 0, 0, -0.002039985032752156, 0, 0.005890210624784231, 0, 0.01300253439694643, 0, 0, 0, 0.01087303645908833, 0, -0.002737910253927112, 0, 0, 0, 0, 0, -0.003537186421453953, 0, 0.0007476066239178181, 0, -0.01367431785911322, 0, 0, 0, -0.01948952861130238, 0, -0.0003386536554899067, 0, 0, 0, 0, 0, 0.008969747461378574, 0, 0.00211850693449378, 0, 0.002794003346934915, 0, 0, 0, -0.005463310983031988, 0, 0.0009515353594906628, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0002734160807449371, 0,
        -0.005998734850436449, 0, 0, 0, 0.003760150633752346, 0, 0.002703265519812703, 0, 0.0003966515650972724, 0.005468102172017097, 0.003086055396124721, 0, 0.003229590132832527, 0.001389343990013003, 0.0002570808574091643, 0, 0.001570631749927998, 0, -0.007516287732869387, 0, 0.003500838298350573, 0, -0.01446265261620283, 0, 0.0009382579592056572, -0.009792476892471313, -0.008045399561524391, 0, 0, 0.005536139942705631, 0, 0, 0, 0, 0, 0, 0.00252083782106638, 0, -0.0001165946741821244, 0, 0, 0, 0, 0, -0.002112485468387604, -0.002758665941655636, 0, 0, 0, 0, 0, 0, 0.003061301307752728, 0, 0, 0, 0, 0, 0, 0, -0.0001067710472852923, 0, -0.0003622056974563748, 0,
        0, 0, 0.002825008006766438, -0.005363276228308678, 0, 0, 0, 0.002507537370547652, 0, 0, 0, 0, 0, 0, 0, 0.004488215781748295, 0, 0, 0, 0, 0, 0, 0, 0.003997943364083767, 0, 0, 0, 0, 0, 0, 0, 0.007186150178313255, 0, 0, 0, 0.001303018303588033, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.003417369909584522, 0, 0, 0, 0.002292606513947248, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.008626490831375122, 0, -0.002021400490775704,
        0, 0, 0, 0, 0, 0, 0, -0.0002787551493383944, 0, 0, 0.001891324063763022, 0, 0, 0, 0.0004243433359079063, 0, 0, 0, 0.0005921940901316702, 0, 0, 0, 0.006244879215955734, 0, 0.0003317033697385341, 0, 0.0005485101137310266, 0, 0, 0, -0.0005000081146135926, 0, 0, 0, 0.002649475354701281, 0, 0, 0, 0.001888884813524783, 0, 0, 0, -0.007034005131572485, 0, 0, 0, -0.009794908575713634, -0.001818244461901486, 0, 0, 0.008192161098122597, -0.007363460026681423, -0.01085751783102751, 0, 0.0135791627690196, -0.004454794805496931, 0, 0, 0.002808030927553773, 0, 0, 0, -0.01822888106107712, -0.006619763560593128
    ]
    scale = 1
    bias = 0.7821782231
    model_ctrs = catboost_model_ctrs_container(
        used_model_ctrs_count = 28,
        compressed_model_ctrs = [
            catboost_compressed_model_ctr(
                projection = catboost_projection(
                    transposed_cat_feature_indexes = [3],
                    binarized_indexes = []
                ),
                model_ctrs = [
                    catboost_model_ctr(base_hash = 768791580653471478, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 0, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 768791580653471478, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 0.5, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 768791580653471478, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 1, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 11154939068695130472, base_ctr_type = "FeatureFreq", target_border_idx = 0, prior_num = 0, prior_denom = 1, shift = 0, scale = 1)
                ]
            ),
            catboost_compressed_model_ctr(
                projection = catboost_projection(
                    transposed_cat_feature_indexes = [4],
                    binarized_indexes = []
                ),
                model_ctrs = [
                    catboost_model_ctr(base_hash = 768791580653471473, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 0, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 768791580653471473, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 0.5, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 768791580653471473, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 1, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 11154939068695130479, base_ctr_type = "FeatureFreq", target_border_idx = 0, prior_num = 0, prior_denom = 1, shift = 0, scale = 1)
                ]
            ),
            catboost_compressed_model_ctr(
                projection = catboost_projection(
                    transposed_cat_feature_indexes = [5],
                    binarized_indexes = []
                ),
                model_ctrs = [
                    catboost_model_ctr(base_hash = 768791580653471472, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 0, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 768791580653471472, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 0.5, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 768791580653471472, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 1, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 11154939068695130478, base_ctr_type = "FeatureFreq", target_border_idx = 0, prior_num = 0, prior_denom = 1, shift = 0, scale = 1)
                ]
            ),
            catboost_compressed_model_ctr(
                projection = catboost_projection(
                    transposed_cat_feature_indexes = [6],
                    binarized_indexes = []
                ),
                model_ctrs = [
                    catboost_model_ctr(base_hash = 768791580653471475, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 0, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 768791580653471475, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 0.5, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 768791580653471475, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 1, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 11154939068695130477, base_ctr_type = "FeatureFreq", target_border_idx = 0, prior_num = 0, prior_denom = 1, shift = 0, scale = 1)
                ]
            ),
            catboost_compressed_model_ctr(
                projection = catboost_projection(
                    transposed_cat_feature_indexes = [7],
                    binarized_indexes = []
                ),
                model_ctrs = [
                    catboost_model_ctr(base_hash = 768791580653471474, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 0, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 768791580653471474, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 0.5, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 768791580653471474, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 1, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 11154939068695130476, base_ctr_type = "FeatureFreq", target_border_idx = 0, prior_num = 0, prior_denom = 1, shift = 0, scale = 1)
                ]
            ),
            catboost_compressed_model_ctr(
                projection = catboost_projection(
                    transposed_cat_feature_indexes = [8],
                    binarized_indexes = []
                ),
                model_ctrs = [
                    catboost_model_ctr(base_hash = 768791580653471469, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 0, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 768791580653471469, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 0.5, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 768791580653471469, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 1, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 11154939068695130483, base_ctr_type = "FeatureFreq", target_border_idx = 0, prior_num = 0, prior_denom = 1, shift = 0, scale = 1)
                ]
            ),
            catboost_compressed_model_ctr(
                projection = catboost_projection(
                    transposed_cat_feature_indexes = [10],
                    binarized_indexes = []
                ),
                model_ctrs = [
                    catboost_model_ctr(base_hash = 768791580653471471, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 0, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 768791580653471471, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 0.5, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 768791580653471471, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 1, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 11154939068695130481, base_ctr_type = "FeatureFreq", target_border_idx = 0, prior_num = 0, prior_denom = 1, shift = 0, scale = 1)
                ]
            )
        ],
        ctr_data = catboost_ctr_data(
            learn_ctrs = {
                768791580653471469 :
                catboost_ctr_value_table(
                    index_hash_viewer = {18446744073709551615 : 0, 18446744073709551615 : 0, 8473802870189803490 : 0, 7071392469244395075 : 2, 18446744073709551615 : 0, 8806438445905145973 : 3, 619730330622847022 : 1, 18446744073709551615 : 0},
                    target_classes_count = 2,
                    counter_denominator = 0,
                    ctr_mean_history = [catboost_ctr_mean_history(sum = 2.94273e-44, count = 61), catboost_ctr_mean_history(sum = 0, count = 12), catboost_ctr_mean_history(sum = 1.4013e-45, count = 5), catboost_ctr_mean_history(sum = 0, count = 1)],
                    ctr_total = [21, 61, 0, 12, 1, 5, 0, 1]
                ),
                768791580653471471 :
                catboost_ctr_value_table(
                    index_hash_viewer = {2136296385601851904 : 0, 7428730412605434673 : 2, 9959754109938180626 : 6, 14256903225472974739 : 1, 8056048104805248435 : 3, 18446744073709551615 : 0, 12130603730978457510 : 5, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 10789443546307262781 : 4, 18446744073709551615 : 0, 18446744073709551615 : 0},
                    target_classes_count = 2,
                    counter_denominator = 0,
                    ctr_mean_history = [catboost_ctr_mean_history(sum = 2.8026e-44, count = 73), catboost_ctr_mean_history(sum = 0, count = 1), catboost_ctr_mean_history(sum = 0, count = 2), catboost_ctr_mean_history(sum = 0, count = 2), catboost_ctr_mean_history(sum = 0, count = 1), catboost_ctr_mean_history(sum = 1.4013e-45, count = 0), catboost_ctr_mean_history(sum = 1.4013e-45, count = 0)],
                    ctr_total = [20, 73, 0, 1, 0, 2, 0, 2, 0, 1, 1, 0, 1, 0]
                ),
                768791580653471472 :
                catboost_ctr_value_table(
                    index_hash_viewer = {18446744073709551615 : 0, 18446744073709551615 : 0, 13987540656699198946 : 3, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18089724839685297862 : 5, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 10353740403438739754 : 1, 3922001124998993866 : 2, 13686716744772876732 : 4, 18293943161539901837 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0},
                    target_classes_count = 2,
                    counter_denominator = 0,
                    ctr_mean_history = [catboost_ctr_mean_history(sum = 0, count = 13), catboost_ctr_mean_history(sum = 3.08286e-44, count = 20), catboost_ctr_mean_history(sum = 0, count = 37), catboost_ctr_mean_history(sum = 0, count = 2), catboost_ctr_mean_history(sum = 0, count = 4), catboost_ctr_mean_history(sum = 0, count = 3)],
                    ctr_total = [0, 13, 22, 20, 0, 37, 0, 2, 0, 4, 0, 3]
                ),
                768791580653471473 :
                catboost_ctr_value_table(
                    index_hash_viewer = {7537614347373541888 : 4, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 5903587924673389870 : 2, 18278593470046426063 : 6, 10490918088663114479 : 3, 18446744073709551615 : 0, 407784798908322194 : 7, 5726141494028968211 : 1, 1663272627194921140 : 10, 8118089682304925684 : 8, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 15431483020081801594 : 9, 18446744073709551615 : 0, 18446744073709551615 : 0, 1403990565605003389 : 5, 3699047549849816830 : 11, 14914630290137473119 : 0},
                    target_classes_count = 2,
                    counter_denominator = 0,
                    ctr_mean_history = [catboost_ctr_mean_history(sum = 9.80909e-45, count = 3), catboost_ctr_mean_history(sum = 1.4013e-45, count = 3), catboost_ctr_mean_history(sum = 5.60519e-45, count = 24), catboost_ctr_mean_history(sum = 0, count = 3), catboost_ctr_mean_history(sum = 5.60519e-45, count = 16), catboost_ctr_mean_history(sum = 4.2039e-45, count = 16), catboost_ctr_mean_history(sum = 0, count = 4), catboost_ctr_mean_history(sum = 0, count = 5), catboost_ctr_mean_history(sum = 1.4013e-45, count = 1), catboost_ctr_mean_history(sum = 0, count = 1), catboost_ctr_mean_history(sum = 0, count = 3), catboost_ctr_mean_history(sum = 2.8026e-45, count = 0)],
                    ctr_total = [7, 3, 1, 3, 4, 24, 0, 3, 4, 16, 3, 16, 0, 4, 0, 5, 1, 1, 0, 1, 0, 3, 2, 0]
                ),
                768791580653471474 :
                catboost_ctr_value_table(
                    index_hash_viewer = {3607388709394294015 : 5, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18356215166324018775 : 2, 18365206492781874408 : 1, 18446744073709551615 : 0, 18446744073709551615 : 0, 14559146096844143499 : 4, 18446744073709551615 : 0, 18446744073709551615 : 0, 11416626865500250542 : 3, 5549384008678792175 : 0},
                    target_classes_count = 2,
                    counter_denominator = 0,
                    ctr_mean_history = [catboost_ctr_mean_history(sum = 0, count = 22), catboost_ctr_mean_history(sum = 2.8026e-45, count = 3), catboost_ctr_mean_history(sum = 0, count = 14), catboost_ctr_mean_history(sum = 2.66247e-44, count = 17), catboost_ctr_mean_history(sum = 0, count = 22), catboost_ctr_mean_history(sum = 1.4013e-45, count = 1)],
                    ctr_total = [0, 22, 2, 3, 0, 14, 19, 17, 0, 22, 1, 1]
                ),
                768791580653471475 :
                catboost_ctr_value_table(
                    index_hash_viewer = {18446744073709551615 : 0, 14452488454682494753 : 5, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 1388452262538353895 : 9, 8940247467966214344 : 1, 4415016594903340137 : 4, 18446744073709551615 : 0, 18446744073709551615 : 0, 41084306841859596 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 8678739366408346384 : 2, 18446744073709551615 : 0, 4544226147037566482 : 11, 14256903225472974739 : 8, 16748601451484174196 : 7, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 5913522704362245435 : 6, 1466902651052050075 : 10, 2942073219785550491 : 12, 15383677753867481021 : 3, 18446744073709551615 : 0},
                    target_classes_count = 2,
                    counter_denominator = 0,
                    ctr_mean_history = [catboost_ctr_mean_history(sum = 8.40779e-45, count = 10), catboost_ctr_mean_history(sum = 2.8026e-45, count = 8), catboost_ctr_mean_history(sum = 0, count = 6), catboost_ctr_mean_history(sum = 2.8026e-45, count = 14), catboost_ctr_mean_history(sum = 1.4013e-45, count = 4), catboost_ctr_mean_history(sum = 2.8026e-45, count = 9), catboost_ctr_mean_history(sum = 0, count = 11), catboost_ctr_mean_history(sum = 0, count = 3), catboost_ctr_mean_history(sum = 1.4013e-45, count = 5), catboost_ctr_mean_history(sum = 9.80909e-45, count = 6), catboost_ctr_mean_history(sum = 0, count = 2), catboost_ctr_mean_history(sum = 1.4013e-45, count = 0), catboost_ctr_mean_history(sum = 0, count = 1)],
                    ctr_total = [6, 10, 2, 8, 0, 6, 2, 14, 1, 4, 2, 9, 0, 11, 0, 3, 1, 5, 7, 6, 0, 2, 1, 0, 0, 1]
                ),
                768791580653471478 :
                catboost_ctr_value_table(
                    index_hash_viewer = {18446744073709551615 : 0, 15379737126276794113 : 5, 18446744073709551615 : 0, 14256903225472974739 : 3, 18048946643763804916 : 1, 2051959227349154549 : 4, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 7024059537692152076 : 6, 18446744073709551615 : 0, 15472181234288693070 : 2, 8864790892067322495 : 0},
                    target_classes_count = 2,
                    counter_denominator = 0,
                    ctr_mean_history = [catboost_ctr_mean_history(sum = 1.4013e-44, count = 58), catboost_ctr_mean_history(sum = 0, count = 4), catboost_ctr_mean_history(sum = 1.4013e-45, count = 6), catboost_ctr_mean_history(sum = 1.4013e-45, count = 5), catboost_ctr_mean_history(sum = 4.2039e-45, count = 6), catboost_ctr_mean_history(sum = 2.8026e-45, count = 0), catboost_ctr_mean_history(sum = 7.00649e-45, count = 0)],
                    ctr_total = [10, 58, 0, 4, 1, 6, 1, 5, 3, 6, 2, 0, 5, 0]
                ),
                11154939068695130472 :
                catboost_ctr_value_table(
                    index_hash_viewer = {18446744073709551615 : 0, 15379737126276794113 : 5, 18446744073709551615 : 0, 14256903225472974739 : 3, 18048946643763804916 : 1, 2051959227349154549 : 4, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 7024059537692152076 : 6, 18446744073709551615 : 0, 15472181234288693070 : 2, 8864790892067322495 : 0},
                    target_classes_count = 0,
                    counter_denominator = 101,
                    ctr_mean_history = [catboost_ctr_mean_history(sum = 9.52883e-44, count = 4), catboost_ctr_mean_history(sum = 9.80909e-45, count = 6), catboost_ctr_mean_history(sum = 1.26117e-44, count = 2)],
                    ctr_total = [68, 4, 7, 6, 9, 2, 5]
                ),
                11154939068695130476 :
                catboost_ctr_value_table(
                    index_hash_viewer = {3607388709394294015 : 5, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18356215166324018775 : 2, 18365206492781874408 : 1, 18446744073709551615 : 0, 18446744073709551615 : 0, 14559146096844143499 : 4, 18446744073709551615 : 0, 18446744073709551615 : 0, 11416626865500250542 : 3, 5549384008678792175 : 0},
                    target_classes_count = 0,
                    counter_denominator = 101,
                    ctr_mean_history = [catboost_ctr_mean_history(sum = 3.08286e-44, count = 5), catboost_ctr_mean_history(sum = 1.96182e-44, count = 36), catboost_ctr_mean_history(sum = 3.08286e-44, count = 2)],
                    ctr_total = [22, 5, 14, 36, 22, 2]
                ),
                11154939068695130477 :
                catboost_ctr_value_table(
                    index_hash_viewer = {18446744073709551615 : 0, 14452488454682494753 : 5, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 1388452262538353895 : 9, 8940247467966214344 : 1, 4415016594903340137 : 4, 18446744073709551615 : 0, 18446744073709551615 : 0, 41084306841859596 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 8678739366408346384 : 2, 18446744073709551615 : 0, 4544226147037566482 : 11, 14256903225472974739 : 8, 16748601451484174196 : 7, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 5913522704362245435 : 6, 1466902651052050075 : 10, 2942073219785550491 : 12, 15383677753867481021 : 3, 18446744073709551615 : 0},
                    target_classes_count = 0,
                    counter_denominator = 101,
                    ctr_mean_history = [catboost_ctr_mean_history(sum = 2.24208e-44, count = 10), catboost_ctr_mean_history(sum = 8.40779e-45, count = 16), catboost_ctr_mean_history(sum = 7.00649e-45, count = 11), catboost_ctr_mean_history(sum = 1.54143e-44, count = 3), catboost_ctr_mean_history(sum = 8.40779e-45, count = 13), catboost_ctr_mean_history(sum = 2.8026e-45, count = 1)],
                    ctr_total = [16, 10, 6, 16, 5, 11, 11, 3, 6, 13, 2, 1, 1]
                ),
                11154939068695130478 :
                catboost_ctr_value_table(
                    index_hash_viewer = {18446744073709551615 : 0, 18446744073709551615 : 0, 13987540656699198946 : 3, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18089724839685297862 : 5, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 10353740403438739754 : 1, 3922001124998993866 : 2, 13686716744772876732 : 4, 18293943161539901837 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0},
                    target_classes_count = 0,
                    counter_denominator = 101,
                    ctr_mean_history = [catboost_ctr_mean_history(sum = 1.82169e-44, count = 42), catboost_ctr_mean_history(sum = 5.1848e-44, count = 2), catboost_ctr_mean_history(sum = 5.60519e-45, count = 3)],
                    ctr_total = [13, 42, 37, 2, 4, 3]
                ),
                11154939068695130479 :
                catboost_ctr_value_table(
                    index_hash_viewer = {7537614347373541888 : 4, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 5903587924673389870 : 2, 18278593470046426063 : 6, 10490918088663114479 : 3, 18446744073709551615 : 0, 407784798908322194 : 7, 5726141494028968211 : 1, 1663272627194921140 : 10, 8118089682304925684 : 8, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 15431483020081801594 : 9, 18446744073709551615 : 0, 18446744073709551615 : 0, 1403990565605003389 : 5, 3699047549849816830 : 11, 14914630290137473119 : 0},
                    target_classes_count = 0,
                    counter_denominator = 101,
                    ctr_mean_history = [catboost_ctr_mean_history(sum = 1.4013e-44, count = 4), catboost_ctr_mean_history(sum = 3.92364e-44, count = 3), catboost_ctr_mean_history(sum = 2.8026e-44, count = 19), catboost_ctr_mean_history(sum = 5.60519e-45, count = 5), catboost_ctr_mean_history(sum = 2.8026e-45, count = 1), catboost_ctr_mean_history(sum = 4.2039e-45, count = 2)],
                    ctr_total = [10, 4, 28, 3, 20, 19, 4, 5, 2, 1, 3, 2]
                ),
                11154939068695130481 :
                catboost_ctr_value_table(
                    index_hash_viewer = {2136296385601851904 : 0, 7428730412605434673 : 2, 9959754109938180626 : 6, 14256903225472974739 : 1, 8056048104805248435 : 3, 18446744073709551615 : 0, 12130603730978457510 : 5, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 10789443546307262781 : 4, 18446744073709551615 : 0, 18446744073709551615 : 0},
                    target_classes_count = 0,
                    counter_denominator = 101,
                    ctr_mean_history = [catboost_ctr_mean_history(sum = 1.30321e-43, count = 1), catboost_ctr_mean_history(sum = 2.8026e-45, count = 2), catboost_ctr_mean_history(sum = 1.4013e-45, count = 1)],
                    ctr_total = [93, 1, 2, 2, 1, 1, 1]
                ),
                11154939068695130483 :
                catboost_ctr_value_table(
                    index_hash_viewer = {18446744073709551615 : 0, 18446744073709551615 : 0, 8473802870189803490 : 0, 7071392469244395075 : 2, 18446744073709551615 : 0, 8806438445905145973 : 3, 619730330622847022 : 1, 18446744073709551615 : 0},
                    target_classes_count = 0,
                    counter_denominator = 101,
                    ctr_mean_history = [catboost_ctr_mean_history(sum = 1.14906e-43, count = 12), catboost_ctr_mean_history(sum = 8.40779e-45, count = 1)],
                    ctr_total = [82, 12, 6, 1]
                )
            }
        )
    )


### Routines to compute CTRs

def calc_hash(a, b):
    max_int = 0xffFFffFFffFFffFF
    MAGIC_MULT = 0x4906ba494954cb65
    return (MAGIC_MULT * ((a + MAGIC_MULT * b) & max_int)) & max_int


def calc_hashes(binarized_features, hashed_cat_features, transposed_cat_feature_indexes, binarized_feature_indexes):
    result = 0
    for cat_feature_index in transposed_cat_feature_indexes:
        result = calc_hash(result, hashed_cat_features[cat_feature_index])
    for bin_feature_index in binarized_feature_indexes:
        binary_feature = binarized_features[bin_feature_index.bin_index]
        if not(bin_feature_index.check_value_equal):
            result = calc_hash(result, 1 if (binary_feature >= bin_feature_index.value) else 0)
        else:
            result = calc_hash(result, 1 if (binary_feature == bin_feature_index.value) else 0)
    return result


def calc_ctrs(model_ctrs, binarized_features, hashed_cat_features, result):
    ctr_hash = 0
    result_index = 0

    for i in range(len(model_ctrs.compressed_model_ctrs)):
        proj = model_ctrs.compressed_model_ctrs[i].projection
        ctr_hash = calc_hashes(binarized_features, hashed_cat_features, proj.transposed_cat_feature_indexes, proj.binarized_indexes)
        for j in range(len(model_ctrs.compressed_model_ctrs[i].model_ctrs)):
            ctr = model_ctrs.compressed_model_ctrs[i].model_ctrs[j]
            learn_ctr = model_ctrs.ctr_data.learn_ctrs[ctr.base_hash]
            ctr_type = ctr.base_ctr_type
            bucket = learn_ctr.resolve_hash_index(ctr_hash)
            if bucket is None:
                result[result_index] = ctr.calc(0, 0)
            else:
                if ctr_type == "BinarizedTargetMeanValue" or ctr_type == "FloatTargetMeanValue":
                    ctr_mean_history = learn_ctr.ctr_mean_history[bucket]
                    result[result_index] = ctr.calc(ctr_mean_history.sum, ctr_mean_history.count)
                elif ctr_type == "Counter" or ctr_type == "FeatureFreq":
                    ctr_total = learn_ctr.ctr_total
                    denominator = learn_ctr.counter_denominator
                    result[result_index] = ctr.calc(ctr_total[bucket], denominator)
                elif ctr_type == "Buckets":
                    ctr_history = learn_ctr.ctr_total
                    target_classes_count = learn_ctr.target_classes_count
                    total_count = 0
                    good_count = ctr_history[bucket * target_classes_count + ctr.target_border_idx];
                    for class_id in range(target_classes_count):
                        total_count += ctr_history[bucket * target_classes_count + class_id]
                    result[result_index] = ctr.calc(good_count, total_count)
                else:
                    ctr_history = learn_ctr.ctr_total;
                    target_classes_count = learn_ctr.target_classes_count;

                    if target_classes_count > 2:
                        good_count = 0
                        total_count = 0
                        for class_id in range(ctr.target_border_idx + 1):
                            total_count += ctr_history[bucket * target_classes_count + class_id]
                        for class_id in range(ctr.target_border_idx + 1, target_classes_count):
                            good_count += ctr_history[bucket * target_classes_count + class_id]
                        total_count += good_count;
                        result[result_index] = ctr.calc(good_count, total_count);
                    else:
                        result[result_index] = ctr.calc(ctr_history[bucket * 2 + 1], ctr_history[bucket * 2] + ctr_history[bucket * 2 + 1])
            result_index += 1



cat_features_hashes = {
    "Female": -2114564283,
    "Protective-serv": -2075156126,
    "Assoc-voc": -2029370604,
    "Married-civ-spouse": -2019910086,
    "Federal-gov": -1993066135,
    "Transport-moving": -1903253868,
    "Farming-fishing": -1888947309,
    "Prof-school": -1742589394,
    "Self-emp-inc": -1732053524,
    "?": -1576664757,
    "Handlers-cleaners": -1555793520,
    "0": -1438285038,
    "Philippines": -1437257447,
    "Male": -1291328762,
    "11th": -1209300766,
    "Unmarried": -1158645841,
    "Local-gov": -1105932163,
    "Divorced": -993514283,
    "Some-college": -870577664,
    "Asian-Pac-Islander": -787966085,
    "Sales": -760428919,
    "Self-emp-not-inc": -661998850,
    "Widowed": -651660490,
    "Masters": -453513993,
    "State-gov": -447941100,
    "Doctorate": -434936054,
    "White": -218697806,
    "Own-child": -189887997,
    "Amer-Indian-Eskimo": -86031875,
    "Exec-managerial": -26537793,
    "Husband": 60472414,
    "Italy": 117615621,
    "Not-in-family": 143014663,
    "n": 239748506,
    "Married-spouse-absent": 261588508,
    "Prof-specialty": 369959660,
    "Assoc-acdm": 475479755,
    "Adm-clerical": 495735304,
    "Bachelors": 556725573,
    "HS-grad": 580496350,
    "Craft-repair": 709691013,
    "Other-relative": 739168919,
    "Other-service": 786213683,
    "9th": 840896980,
    "Separated": 887350706,
    "10th": 888723975,
    "Mexico": 972041323,
    "Hong": 995245846,
    "1": 1121341681,
    "Tech-support": 1150039955,
    "Black": 1161225950,
    "Canada": 1510821218,
    "Wife": 1708186408,
    "United-States": 1736516096,
    "Never-married": 1959200218,
    "Machine-op-inspct": 2039859473,
    "7th-8th": 2066982375,
    "Private": 2084267031,
}

def hash_uint64(string):
    return cat_features_hashes.get(str(string), 0x7fFFffFF)


### Applicator for the CatBoost model

def apply_catboost_model(float_features, cat_features=[], ntree_start=0, ntree_end=catboost_model.tree_count):
    """
    Applies the model built by CatBoost.

    Parameters
    ----------

    float_features : list of float features

    cat_features : list of categorical features
        You need to pass float and categorical features separately in the same order they appeared in train dataset.
        For example if you had features f1,f2,f3,f4, where f2 and f4 were considered categorical, you need to pass here float_features=f1,f3, cat_features=f2,f4


    Returns
    -------
    prediction : formula value for the model and the features

    """
    if ntree_end == 0:
        ntree_end = catboost_model.tree_count
    else:
        ntree_end = min(ntree_end, catboost_model.tree_count)

    model = catboost_model

    assert len(float_features) >= model.float_feature_count
    assert len(cat_features) >= model.cat_feature_count

    # Binarise features
    binary_features = [0] * model.binary_feature_count
    binary_feature_index = 0

    for i in range(len(model.float_feature_borders)):
        for border in model.float_feature_borders[i]:
            binary_features[binary_feature_index] += 1 if (float_features[model.float_features_index[i]] > border) else 0
        binary_feature_index += 1
    transposed_hash = [0] * model.cat_feature_count
    for i in range(model.cat_feature_count):
        transposed_hash[i] = hash_uint64(cat_features[i])

    if len(model.one_hot_cat_feature_index) > 0:
        cat_feature_packed_indexes = {}
        for i in range(model.cat_feature_count):
            cat_feature_packed_indexes[model.cat_features_index[i]] = i
        for i in range(len(model.one_hot_cat_feature_index)):
            cat_idx = cat_feature_packed_indexes[model.one_hot_cat_feature_index[i]]
            hash = transposed_hash[cat_idx]
            for border_idx in range(len(model.one_hot_hash_values[i])):
                binary_features[binary_feature_index] |= (1 if hash == model.one_hot_hash_values[i][border_idx] else 0) * (border_idx + 1)
            binary_feature_index += 1

    if hasattr(model, 'model_ctrs') and model.model_ctrs.used_model_ctrs_count > 0:
        ctrs = [0.] * model.model_ctrs.used_model_ctrs_count;
        calc_ctrs(model.model_ctrs, binary_features, transposed_hash, ctrs)
        for i in range(len(model.ctr_feature_borders)):
            for border in model.ctr_feature_borders[i]:
                binary_features[binary_feature_index] += 1 if ctrs[i] > border else 0
            binary_feature_index += 1

    # Extract and sum values from trees
    result = 0.
    tree_splits_index = 0
    current_tree_leaf_values_index = 0
    for tree_id in range(ntree_start, ntree_end):
        current_tree_depth = model.tree_depth[tree_id]
        index = 0
        for depth in range(current_tree_depth):
            border_val = model.tree_split_border[tree_splits_index + depth]
            feature_index = model.tree_split_feature_index[tree_splits_index + depth]
            xor_mask = model.tree_split_xor_mask[tree_splits_index + depth]
            index |= ((binary_features[feature_index] ^ xor_mask) >= border_val) << depth
        result += model.leaf_values[current_tree_leaf_values_index + index]
        tree_splits_index += current_tree_depth
        current_tree_leaf_values_index += (1 << current_tree_depth)
    return model.scale * result + model.bias



