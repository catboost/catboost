###  Model data
class catboost_model(object):
    float_features_index = [
        0, 1, 2, 4, 5, 7, 8, 9, 11, 13, 14, 15, 16, 17, 18, 20, 22, 24, 27, 28, 31, 32, 33, 35, 37, 38, 39, 46, 47, 48,
    ]
    float_feature_count = 50
    cat_feature_count = 0
    binary_feature_count = 30
    tree_count = 40
    float_feature_borders = [
        [8.42320005e-05, 0.142170504, 0.178914994, 0.18286401, 0.1838945, 0.392030001, 0.938714027, 0.941783547],
        [0.00619588513, 0.0192911513, 0.0332521498, 0.060714297, 0.0622565001, 0.0641817003, 0.149011999, 0.156479999, 0.173023999, 0.232942492, 0.266209006, 0.312178016, 0.555750489, 0.65822804],
        [0.0272288993, 0.0612362474, 0.148191005, 0.220155507, 0.320514023, 0.879231513, 0.903753996, 0.937671542, 0.937812984, 0.938855052, 0.943338513],
        [0.5],
        [0.5],
        [0.5],
        [0.5],
        [0.5],
        [0.5],
        [0.5],
        [0.319608003, 0.398038983, 0.421568513, 0.429412007, 0.449019492, 0.52352953, 0.558823466, 0.570587993, 0.582352996, 0.598039031, 0.617646992],
        [0.0652175024, 0.402851999, 0.436507493, 0.506097496, 0.587584972, 0.694638968, 0.748417497, 0.812202513, 0.882336497, 0.892754495, 0.951807022, 0.994328022, 0.995477498],
        [0.00477430504, 0.0211588498, 0.0440538004, 0.0504557006, 0.0785620958, 0.163680494, 0.193072498, 0.283435494, 0.291958004, 0.311626017, 0.333916008, 0.365603, 0.564610481, 0.594812512, 0.630002975, 0.651247025, 0.795647502, 0.838178515],
        [0.0398375988, 0.0704592466, 0.0775363445, 0.115491495, 0.125045002, 0.135439992, 0.136280507, 0.136283994, 0.142480001, 0.149134487, 0.154994011, 0.166591495, 0.182393, 0.199276, 0.209422499, 0.240777999, 0.261489511, 0.28202498, 0.282488495, 0.283073485, 0.297052979, 0.297099501, 0.340355515, 0.370052516, 0.383669496, 0.383894503, 0.404548526],
        [0.5],
        [0.311765015, 0.362744987, 0.398038983, 0.503921509, 0.519608021, 0.888235509, 0.929412007, 0.968627512],
        [0.5],
        [0.0224121511, 0.0261416994, 0.0437176004, 0.205197006, 0.214376509, 0.29707399, 0.938699961, 0.939667463, 0.952567995, 0.977382004, 0.985821962],
        [0.5],
        [0.5],
        [0.134183004, 0.209473491, 0.714276493, 0.736314535, 0.914529979],
        [0.5],
        [0.0106700007, 0.185759991, 0.65686202, 0.793442488, 0.898061514, 0.941025019],
        [-0.01366325, 0.000421083503, 0.318073004, 0.348299503, 0.378690004, 0.423586994, 0.789705515, 0.799287021, 0.937372506, 0.957795024, 1.01357007, 1.06365001, 1.12072992, 1.35545993],
        [0.00109501497, 0.00648584962, 0.0309973005, 0.267857015, 0.285284996],
        [0.02983425, 0.283847004, 0.357340515, 0.652836502, 0.661086977, 0.66582948, 0.682412982, 0.726830006, 0.971971512, 0.975975513],
        [0.000425621984, 0.001333775, 0.00246337987, 0.00262395991, 0.00386290997, 0.00393318012, 0.005463365, 0.00693041505, 0.00773809478, 0.0131743001, 0.0170665998, 0.0175284501, 0.0689947009],
        [0.103404, 0.153070495, 0.164992496, 0.29935801, 0.33159849, 0.37738049, 0.433409005, 0.462027013, 0.607007504, 0.665955007, 0.762612998, 0.811691999],
        [0.413850993, 0.502859473, 0.509687006, 0.715005994, 0.90199399, 0.984259963, 0.989368498],
        [0.145993501, 0.2858935, 0.340994507, 0.454562485, 0.486074001, 0.517826021, 0.533041, 0.762283504, 0.870769978, 0.911834955],
    ]
    tree_depth = [6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 4]
    tree_split_border = [1, 8, 7, 7, 13, 6, 9, 2, 3, 3, 4, 2, 2, 14, 22, 7, 1, 2, 10, 1, 2, 6, 10, 3, 9, 3, 5, 2, 16, 4, 11, 17, 16, 8, 4, 4, 2, 6, 5, 10, 1, 5, 12, 6, 1, 8, 1, 7, 1, 1, 1, 5, 9, 3, 4, 9, 1, 1, 3, 8, 5, 11, 4, 2, 2, 4, 1, 1, 1, 1, 9, 10, 1, 13, 7, 4, 12, 8, 7, 5, 2, 1, 10, 2, 8, 2, 2, 6, 4, 2, 17, 4, 1, 5, 1, 5, 8, 7, 6, 1, 11, 3, 7, 6, 3, 5, 4, 19, 10, 4, 1, 12, 4, 6, 14, 13, 11, 8, 7, 8, 8, 3, 9, 3, 2, 16, 1, 1, 1, 3, 9, 7, 3, 3, 5, 2, 1, 5, 4, 9, 1, 5, 1, 4, 9, 9, 10, 20, 23, 2, 7, 25, 24, 1, 3, 11, 1, 6, 12, 5, 6, 2, 12, 5, 4, 13, 11, 3, 3, 11, 8, 5, 8, 9, 10, 7, 12, 9, 8, 3, 5, 3, 6, 1, 11, 6, 1, 4, 7, 7, 9, 15, 13, 6, 5, 7, 1, 11, 4, 18, 6, 6, 6, 1, 10, 5, 9, 21, 18, 15, 6, 3, 9, 2, 4, 12, 27, 3, 9, 10, 1, 7, 26, 7, 4, 8, 1, 10, 13, 14, 2, 10, 1, 11, 13, 8, 14, 11]
    tree_split_feature_index = [20, 1, 26, 11, 12, 23, 2, 10, 15, 23, 12, 22, 28, 12, 13, 10, 9, 25, 29, 5, 25, 2, 25, 22, 2, 24, 11, 1, 13, 15, 26, 13, 12, 25, 12, 17, 17, 26, 13, 13, 21, 23, 12, 25, 8, 11, 22, 17, 17, 6, 29, 0, 29, 25, 22, 2, 23, 16, 10, 26, 22, 12, 2, 13, 29, 27, 16, 12, 6, 26, 27, 10, 0, 1, 2, 23, 13, 10, 25, 25, 27, 7, 12, 20, 15, 17, 12, 28, 11, 15, 12, 26, 25, 26, 6, 15, 15, 25, 25, 28, 23, 17, 15, 15, 0, 10, 0, 13, 2, 20, 4, 26, 28, 13, 13, 13, 27, 29, 27, 27, 2, 20, 25, 11, 23, 12, 18, 27, 1, 25, 13, 13, 2, 28, 17, 26, 24, 29, 13, 11, 15, 27, 18, 1, 17, 12, 26, 13, 13, 11, 15, 13, 13, 27, 13, 10, 13, 0, 27, 28, 11, 24, 11, 20, 24, 23, 23, 12, 29, 1, 23, 12, 13, 13, 17, 0, 23, 17, 12, 1, 2, 26, 1, 5, 13, 10, 10, 25, 12, 1, 23, 13, 11, 22, 24, 28, 11, 2, 10, 12, 27, 12, 29, 3, 27, 1, 26, 13, 13, 12, 17, 11, 10, 0, 29, 1, 13, 27, 1, 11, 19, 23, 13, 29, 28, 17, 2, 23, 26, 1, 2, 1, 14, 11, 11, 0, 23, 17]
    tree_split_xor_mask = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    cat_features_index = []
    one_hot_cat_feature_index = []
    one_hot_hash_values = [
    ]
    ctr_feature_borders = [
    ]

    ## Aggregated array of leaf values for trees. Each tree is represented by a separate line:
    leaf_values = [
        -0.01430237997232667, -0.001479429539146131, -0.00603033550869387, -0.008234973268893775, -0.005375339298514032, 0.03217436034439835, -0.0007621103165580699, 0.02881591689721437, -0.01578537331124786, 0.01458132598598089, 0.00975864984795956, 0.009626649814890392, 0.01871664791795313, 0.0282875700962062, 0.02417624851143309, 0.03349831575579831, 0.02799631098099291, 0, 0, 0, -0.01953698641620538, 0, 0.02084734883787036, 0, -0.007058548516194664, 0, 0.06939658693376974, 0, 0.03539903226774349, 0, 0.008279687295690128, 0.006801187127653679, -0.01020473302805371, 0.06691959400986147, -0.01218659988923081, 0, -0.006329241910995273, 0.02281661542065794, 0.008066803779656745, 0.05156289252748279, -0.004940547117316695, 0.002300279908813374, 0.006318144305312886, 0, 0.009830096956024135, 0.03752526231477692, 0.002380621677602662, 0.002300279908813374, 0, 0, -0.007326369906077018, 0, 0, 0, -0.005595178166033176, -0.007326369906077018, -0.007326369906077018, 0, 0.07310928776336763, 0, -0.004940983961336265, 0, 0.008621431815437664, 0,
        -0.00520700064916506, 0, -0.001808890674251141, 0, -0.00612387527909795, 0, -0.01198431760839616, 0, -0.01483476862606382, 0, -0.003343481069146839, 0, -0.007213024545819791, 0, -0.005001321422785998, 0, 0.00126221590837363, 0.001898988680996361, 0.0006716757123543395, -0.002339265798138923, 0.0002241323499448407, 0, -0.003393640569931512, 0, 0.005991060770108408, 0, 0.01003255124085977, 0, -0.008812572284627658, 0, -0.003058512622594261, 0.005082603319544496, -0.01855918597225446, 0, 0.01173224281278993, -0.007147221348604553, 0, 0, -0.008302381783877428, 0.007860953343849311, 0.02495599971392573, 0, 0.01762448997415463, 0, 0.009413216904272409, 0.05437165245813356, 0.01745677855752704, 0, 0.00518040606135699, 0, 0.01396079927672837, 0.01666322778728729, 0, 0, 0.0004776893646163293, 0.06264427055943129, 0.005114692999805025, 0.1004279226987808, 0.01839063189273494, 0.006772278335165731, -0.008303203355930282, 0, -0.003003743907965036, 0.03958454353744102,
        -0.003505448892655228, 0.01418437689445323, -0.007343250337317424, 0, -0.007079619428213164, 0.03911794844081342, 0.06790138974372328, 0, -0.005969465385445225, 0.01733148444587546, 0.00598659424785422, 0, -0.01084388777306784, -0.006357739785058745, 0.01085175507398969, 0, 0.0370409083223428, -0.0003054820272515602, 0.01907483747679825, 0, 0.002581935452859604, 0, -0.005041912884341863, 0, -0.003470972409862598, 0.006612169269215126, 0, 0, -0.008860263620022296, 0, 0, 0, 0.001501376305536281, 0.01541302490246567, 0.01453095818246492, -0.01146139026964995, -0.00921340907292603, 0, -0.002680035487982509, 0, -0.008310669715224438, 0.00762419311074142, -0.00810526808320367, 0.001784984756103418, -0.008379159015951038, 0, 0.03778326672786179, 0, 0.003733109741289983, -0.004759396325848873, -0.006285100656941954, 0, 0, 0, 0, 0, 0.01625242339397856, 0.001300260435610042, 0, 0, -0.004143234901878417, 0, 0, 0,
        -0.001988661710815725, 0, 0.008887370788086829, 0, 0.001406188594169311, 0.02265840083602481, -0.003932520164251429, 0.02240713600000227, -0.00241291278946137, -0.004142104293986815, 0.07822192764738486, 0, 0.003076518065068065, 0.1023799056079153, 0.01016329558535048, 0.005352234331198313, 0, 0, 0, 0, -0.01061014862149722, 0, -0.003827175865617844, -0.009066454936434315, 0, 0, 0, 0, 0, 0, 0, 0, 0.005458767020089397, 0, 0.01667922337352739, 0, -0.0098210997537003, 0, -0.009190660433912565, -0.005706178526988377, -0.01315825492458634, 0, 0, 0, 0.005985810543070218, 0, 0.004117758664729924, 0.001686028762616254, 0, 0, 0, 0, 0, 0, 0.009364146269118568, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0.0002996815283729559, 0, 0.03976126079211356, 0.03352372704462624, -0.0009002149744295417, 0, -0.001929385634439271, 0, -0.003352199398905534, 0, -0.003088838470303546, 4.814163167214701e-05, 0.007611039475457325, 0.05358865872890362, 0.006978985864220352, 0.004046684424006852, -0.01077008527401744, 0, 0, -0.00749779178258362, -0.009743786658331328, 0, -0.004819724871084645, 0, -0.002377692521238582, 0.03970007994785947, 0, 0.04331959603806371, 0.008432237309428745, 0, -0.008428034435878322, -0.01211978551308914, -0.00785482904087347, 0, 0, 0, -0.004176787145115601, 0, -0.006210738374173383, 0, -0.007534802873984041, 0, 0.01991462716042983, 0, -0.001848251560371402, 0, 0.008278762150799434, 0, -0.01220558091240543, 0, 0, 0, -0.01205003684327454, 0, 0, 0, -0.001940260394847846, 0, 0, 0, -0.009510967159913029, 0.005260970801994461, 0, 0,
        0.00363995680292777, 0, -0.002731014532764568, 0, 0, 0, 0, 0, -0.01177062887655137, 0, 0, 0, 0, 0, 0, 0, -0.0003908746386152034, -0.002609117504681084, -0.008454268672832291, 0.006536952423659274, -0.01381061463207346, -0.009816082503140819, 0.06519470154363718, -0.003097618191603012, -0.009007423318613804, -0.008601170710315562, -0.01595524018105409, 0, 0, -0.00377290037545939, 0, 0, -0.001890146764057868, 0, -0.002606055325793413, 0, 0, 0, 0, 0, 0.009336069571068896, 0.004662687286511395, 0.02217730333428459, 0, 0, 0, 0, 0, 0.002884296657924178, 0.008459175888557801, -0.005001509386242455, 0.03475021017029301, -0.01140892673996122, 0.03465046332011847, 0.02438471873211025, 0.007602770747458699, -0.004525722046361313, -0.001182297534870492, -0.01959815402918592, 0, 0, -0.01722469789426894, 0, 0,
        0, -0.008344191412251616, 0, -0.009929659007364078, 0, 0.007232870694279804, 0.03721381661614703, 0.004744033339042923, 0, 0, 0, 0, 0.001702895521848914, -0.00130630408912455, 0.004386655679658269, 0.00151457802533137, 0, 0.002685448059030866, 0, 6.074585151157555e-05, 0, 0.007452488993055505, 0.006730005616826124, 0.007159012187655153, 0, 0, 0, 0, 0, -0.0130439346667601, 0, 3.573359806998537e-05, -0.01216830009944349, -0.009112017356187095, -0.006452836254454495, -0.009731874961606476, 0.05786091128904723, 0.02800176294867169, 0.03069739500192768, 0.01053851331674304, 0, 0, 0, 0, 0.006494889639467123, -0.001592929594391223, -0.006790379488246113, 0.002770056970569519, 0, 0.0004384204501004805, 0, 0.005491548254211866, 0, -0.003489583450091151, 0, -0.01405909656738287, 0, 0, 0, 0, 0, 0.02209070515404151, 0, 0.04354539604940491,
        -0.001310602084299069, 0.0106875631671383, -0.008021211631088815, -0.0186154060302299, -0.002917385725125112, -0.004638394263243167, 0.004501178206361139, 0, -0.002667040867823248, 0.0213229109923185, 0.02079825477290441, -0.008508696894743996, -0.002948537143639868, -0.007808683863159987, -0.01307423859917466, 0, 0.002286695037289434, 0.00485397248215019, -0.01166185203274528, -0.01653701189455547, -0.01560804227356464, 0.008512952309995192, -0.005256594146729844, 0.0006450560326834065, 0.0009735736274286022, -0.01361464133852348, 0.02105801477075577, 0, -0.009378887925798602, 0, 0.01375345731592391, 0.002138492719045184, 0.005409833080461574, 0.01665328294385608, 0.003349026111460437, 0, 0, 0, 0, 0, -0.003308028676234779, -0.01029382185650965, 0.009027107357755073, -0.007708469168421176, 0, 0, 0, 0, 0.004141158052256799, -0.001524078420062176, 0.003389618653792566, 0, 0, 0, 0, 0, 0.003237794328482802, 0.004260554596035394, 0.006079139376183641, -0.005895045617306331, 0, 0, 0, 0,
        -0.006025131736199306, -0.002076508240542934, 0, 0, -0.01056963398481086, -0.004284968179269402, 0.04787190237415764, -0.003218386606110862, -0.001050756396975556, -0.001362908166946426, 0, 0.01074039908529794, 0.01790060030723439, 0.0009479947875400258, 0, 0.006331255235412886, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.00473528337024717, 0, 0, 0, -0.000980829864751723, 0, 0, 0, 0.001773577432291047, 0.0005114320473291168, -0.003353941666015401, -0.002050584633682938, 0.005682680274826767, 0, 0.04042780645570403, 0.01039214194291128, -0.0001461766936996887, 0, -0.003496927592297796, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.03250184433927365, 0, 0.006359023834928138,
        -0.004368707024980042, -0.009127346327506943, 0, 0, 0.001473659196739735, 0, 0, 0, -0.004332798526969983, 0, 0, 0, -0.0002823938278156697, -0.004819984632971687, 0.02131247125858036, 0, -0.01285238609278234, 0, 0, 0, -0.007000732478541481, 0, 0, 0, -0.001725966208941002, 0, -0.0002840354070518517, 0, 0.0007800653254054939, -0.006233078340462439, -0.01185412291752638, 0, -0.01489399244656939, 0, 0, 0, -0.01226573397748937, 0, 0, 0, 0.00593306689718284, 0.00220083585519867, -0.001224097683640295, 0, 0.004621930960432907, -0.01015964569293035, 0.03946497698107871, -0.0003785250722510567, 0, 0, -0.002449096270146937, 0, -0.007631703823975011, 0, 0, 0, 0.001876601995227396, -0.01301712188048109, -0.006127533198099296, -0.0003442796003546529, 0.001572058228963609, -0.004361163442897226, 0.02986288243250793, 0,
        0.001499901090628288, 0, 0, 0, 0, 0, 0, 0, -0.001169944160344739, 0, -0.005190252337302494, 0, -0.003491456315087054, 0, 0, 0, -0.009481405566253723, 0, 0, 0, -0.01295999404563281, 0, 0, 0, 0.01784243369383981, -0.007358933966003632, 0.03217071588425583, 0, 0.0008202850984278814, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.002843860299098138, 0, 0, 0, 0, 0, 0, 0, -0.01020695362236439, 0, -0.007682593920298844, 0, -0.004412027542295064, 0, 0, 0, -0.0003559066624799891, 0, 0.005245734436185495, 0, 0.001348793213355428, -0.005105760264240942, -0.006853162928304932, -0.01155269278565114,
        0.01462893477173946, -0.001733341574970518, 0.002869434966297467, -0.002304085792690722, 0, -0.004124830508137217, 0, 0, 0, 0, -0.007128937296658572, 0.001562988065814734, 0, 0, -0.01189436415231841, 0.004605106461828375, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.003502604276851144, -0.001292543760681561, 0, 0, -0.006830831303690805, -0.005541579326339561, 0.007118006204892829, 0.007584726207748329, -0.002967178296583999, -0.005830896688654479, 0, 0, 0, 0, 0, 0, -0.006604643458087523, -0.0009327520502244468, 0, 0, -0.003961771980648678, 0.001048249200710134, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.02236158585810135, 0.004293774149022081, 0, 0, -0.004242894000954669, -0.007855122343735815,
        -0.007823680313266407, -0.001287348487491053, 0, -0.010837430340308, 0, -0.004352289811770985, 0, 0, 0, 0.003371391210146853, 0, 0, 0, -0.008850279522665216, 0, 0, -0.004789803083623602, 0.00078458417878478, 0.01152103702448343, -0.007847652801141414, 0, -0.001855059467268184, 0, -0.01550625127312665, 0, -0.0005756119130710954, 0, -0.005511049572213746, 0, 0.04454912204523431, 0, 0.04634502132475857, -0.01062560274458173, 0.003497897320820115, 0, -0.00461034942300377, 0, 0, 0, 0, 0, -0.003347662349083091, 0, 0, 0, 0.002278276548818141, 0, 0, -0.007450199723685379, 0.0005162685928372519, -0.005750067938359658, 0.006086069151255804, 0, 0.004924595692686411, 0, 0, 0, 0.001187086741253732, 0, -0.009436640629411857, 0, -0.004190788926937718, 0, 0,
        0.0004598915688906578, 0, 0.006556513223535837, 0.0008051818571879673, -0.0006453756055685794, 0, 0.01802366363094902, -0.008047481640815176, 0.007264134801288031, 0, 0, 0.02802325904507149, -0.002493075798725435, 0, 0.01446936875249179, -0.004910217957017775, -0.01393759293944997, 0, 0, 0, 0.006482677278103179, 0, 0, -0.005300292014561091, 0, 0, 0, 0, 0.006406058947192392, 0, -0.001862092872295985, -0.01095438543215093, -0.0001441933496386577, 0, 0, 0.0002131213377078337, 0.003547445423584266, 0, 0, -0.01233154349369858, 0.003260389842546107, 0, 0, 0.009072486430686841, -0.01126002090519313, 0, -0.001555013523382104, 0.001603883555736158, 0, 0, 0, 0, -0.002302753092423417, 0, 0.0007958108728120102, 0, 0, 0, 0, 0, -0.001044956644940987, 0, 0, -0.002348539462411356,
        0, 0, -0.005312910362051543, 0, -0.008108016943601755, 0, -0.003855825631714762, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.008000711477906979, 0, -0.004092811251273226, 0, 0.01578588095519804, 0, 0.0006334169291178709, 0, 0, 0, 0, 0, 0, 0, -0.0007005850272748074, 0, -0.002791724988662119, 0, 0.005456721121284953, 0, 0.0119794532531443, 0, 0.0001908527153749366, 0, 0, 0, 0.02990606250977816, 0, 0, 0, 0, 0, -0.007919536297973095, 0, 0.003733281670589249, 0, 0.0006284184287341403, 0.008711331303892938, -0.0002726935096968217, 0.02609221010040896, 0, 0, 0, 0, 0, 0, -0.004262818116792398, 0,
        -0.0009949409289543966, 0.04118983941586325, 0.008277449885740628, -0.007645544667380516, 0.0007687240994162303, 0, 0.004466528824985926, 0, 0, 0, 0.0002528554404269592, -0.03041971223358197, 0, 0, -0.002626520962609527, 0.007491902622263478, 0.03131706584566617, 0, 0.06079296263833136, 0, -0.01038451500137233, 0, -0.009059323981795544, 0, 0, 0, -0.002050769568079408, 0, 0, 0, 0.001262024732845429, 0.002886266676462339, -0.005735991814123804, 0, 0.003878153627996387, 0, 0.00140686878052022, 0, -0.003510428421988954, 0, 0, 0, 0.004319395506287635, -0.00508715108035176, 0, 0, 0.003939975000185743, 0.02091389835104206, 0, 0, -0.007154309264784474, 0, -0.01033789717403853, 0, -0.006332082695056853, 0, 0, 0, -0.0178301859929063, 0, 0, 0, 0.001308416444775845, -0.0007892540321797806,
        0.001263346746073254, 0.01302181912168937, 0, 0, -0.006119736306824766, 0, 0.006689482981578758, 0.0001878534301284301, -0.004014357879639584, 0, 0, 0, 0, 0, -0.00386322251031641, 0, 0.02884311799202937, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.0001762451209340618, 0.01706204024560051, 0, 0, 0.01060055124107357, 0, -0.004646021368407429, 0, 0.0009449934258301755, 0, 0, 0, 0.01837780621340608, 0, -0.0004549917146535714, 0, -0.002875771115941783, 0, 0, 0, 0, 0, 0, 0, 0.0325226911549931, 0, 0, 0, 0, 0, -0.003771412343588246, 0,
        0.001746674053349748, 0, 0, 0, 0.02724529839829597, 0, 0, 0, -0.003668671789152955, 0, 0, 0.00209556007061952, -0.004385854245014876, 0, 0, 0, 0, 0, 0, 0, -0.003113998912037612, 0, 0, 0, 0, 0, 0, 0, 0.0008567438177409328, 0, -0.01215336206154611, 0.01374057435961119, -0.00030397275368127, 0, 0, 0, -0.004019249895813781, 0, 0, 0, -0.003457500768051992, 0, 0, 0, 0.0021696448695827, 0, 0, 0, 0, 0, 0, 0, 0.007298478655135106, 0, 0, 0, 0, 0, 0, 0, 0.003705471250700667, 0, 0.0005733255230740167, 0.01052681395153971,
        -0.0002211116903581587, 0, 0, 0, -0.003703627479849622, 0, 0, 0, 0.003020380958671391, 0, 0, 0, 0.003449665997818055, 0, 0, 0, -0.0006310664680106986, 0, 0, 0, -8.57660453352714e-05, 0.00222584312026532, -0.004475895553703117, 0, -0.003536059268475978, 0, 0, 0, 0.0005803347635831065, 0, -0.007793263841048116, -0.006176675066897155, -0.001374871415402461, 0, 0, 0, 0.01038465455977565, 0, 0.001446425190687866, 0, 0.009250222054328428, 0, 0, 0, -0.005318820407842633, 0, 0, 0, -0.00139654411282089, 0.04708239183345638, 0.02107499068718454, -0.01418494834779022, 0.03964622965476177, 0, 0, 0, -0.01361093470857763, -0.0008769521152742939, 0, 0.00533884628887306, -0.001282518420657468, 0.01598327922330102, -0.0009977817335702242, -8.893377320492037e-06,
        0.001507921967194881, 0, 0.002317911639079047, -0.001403286762136736, 0, 0, 0, 0, 0.0003822905546745453, 0, 0.01752720770451308, 0.01702898930962696, 0, 0, 0, 0, 0.001128966814834983, 0, 0.003991410254112558, 0.0005752845286374102, 0, 0, 0, 0, 0.008858676317943997, 0, 0.02094454072660234, -0.02060980793098284, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.00120368390085436, 0, 0.01026906205766431, -0.002201504626656906, -0.01150421450448294, 0, -0.001751835519675159, -0.006921615844784528, -0.005491505628750378, 0, -0.0005676345530593901, 0.003762857601547502, -0.005277239024913582, 0, 0.04523053038493475, -0.01001843887150683,
        -0.001342884822205767, -0.001226415061083877, 0, -0.003853922572841781, 0.005945097090712754, 0, -0.001516754529623017, 0, 0.0002019514742890497, 0.002501582965146084, -0.004026661389920416, 0.004236693682503265, -0.004076624367665702, -0.003288625285532829, -0.001660121422928098, -0.002886421000082783, -0.005696559525601879, 0.01222084722496992, 0.01152975378100882, 0.007541202161373199, 0.02965369654845098, 0, 0, 0, 0.0007989377890672559, 0.03902214872223279, -0.00498584906824541, -0.0123340301918919, -0.0001573808165271171, 0.001910016395708696, -0.006832964263049341, -0.004920917760106136, 0.02275357588580119, 0, 0, 0, 0, 0, 0, 0, -0.005507014686167604, 0, 0, 0, -0.000741634156932938, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.003083542119329341, 0, 0, 0, 0.004279544686477893, 0, 0, 0,
        -0.0004813379839057041, -0.003650857927009109, -0.00408516161385524, 0.003527808780862617, 0.004505121694214131, 0, -0.001252992120503959, 0.006362819027659963, -0.01280708906211011, 0, 0.003701396839347974, 0, 0.006206805951358065, 0.03091997291426385, -0.001420574862263479, -0.01014731620472612, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.00890902859272329, 0, -0.003584778632583301, 0, 0.005411415096576766, 0, 0.04287511268486757, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.002702390386889971, -0.004108783597477544, -0.001304832350616232, 0.002679884882650579, -0.008225560157783356, 0.02262497120831464, -0.004917048380479719, 0.003741251690680128, 0.00149026624078212, 0.008306813988237285, -0.0080295273121017, -0.006243783414278643, 0.0118035334089235, -0.002376790503308245, 0.002825256686644862, -0.002829190861654964,
        0.001662800851030291, 0.01297281097930893, 0, 0, 0.000794298270367625, -0.007340648671308797, 0.003666225123036542, -0.003600491429135585, -0.002638466848952302, -0.007801269303378548, -0.0144246797991983, 0.02813643677908585, 0.003078179747338571, -0.006541018024548364, -0.003157442867108542, -0.0009803822207552627, 0.004374104982773155, 0, 0, 0.00475613062186229, -0.004628038270883972, 0.001777552773255022, 0.006137734391862369, 0.006305255418281028, -0.006008887434039452, -0.01879084932324986, 0, -0.003498194185148524, 0.01066464123533531, -0.007453130088252095, 0.01168178985481485, -0.002217363083267085, 0.01864604324530095, 0.007675191803303272, -0.003538816798868138, -0.002333740564567106, -0.003558499769025481, 0, 0, 0.001595163539041114, -0.002423894151630875, -7.813669523720051e-06, -0.01078995884313671, -0.006919732999734066, -0.001392967907151955, -0.01262940128618869, 0.0008820329949085645, 0.005106909234121165, 0, 0, 0, 0, 0, 0, -0.009009786096956322, -0.006143581844967573, 0.001037088686056487, 0, 0.003509642290891526, 0.001453291252877227, 0.01577744039081314, -0.01527812378292056, 0.0202448336962485, 0.001044742554313405,
        -0.005225491081067297, 0.002295953726884756, 0, 0.004773088934626995, -0.004691227793140237, 0.003903137207172557, -0.004361299362375357, -0.005862520108623428, 0.00542186644056764, 3.118146396196773e-05, 0, 0.03814663208355991, -0.004391821730398287, 0.002501778107486217, 0.002576211067983549, -0.01457643305874634, -0.004193386585443284, -0.0001343050941478253, 0, -0.007465532351606892, -0.005526946420173397, 0.002362208440459649, 0.02872003894768988, -0.01033752453224582, 0.001090656386283139, -0.004076707210730601, 0, 0, 0.01124031701204381, -0.004207987219835473, 0.003498450162107435, 0.01211668413987868, -0.008798166826924695, -0.001000732015566784, 0, -0.008626707967110014, -0.003118713499938547, -0.006019522880136973, 0.01048102060525267, -0.004644889968427857, -0.001650386561721543, -0.001025655182063961, -0.00169799756728843, 0.02020236234333394, -0.003953667497461595, 0.001273752401613672, 0, -0.003155621869343493, 0, 0.003895498848950576, 0, 0.02185427703878192, -0.009594005844816801, -0.009270625681089129, 0, -0.005138315280533602, -0.00934302440800115, -0.001518966894365704, 0, 0.0132446092926068, -0.00357118881158674, 0.0120540389556356, 0, -0.01293309396449004,
        -0.0004221380620402956, 0.01246038326698975, -0.005847653724222326, 0, 9.61247624177278e-05, 0, -0.006246794537874552, 0, -0.0007139630038723062, 0, 0.01152121021716042, 0, -0.01306268073759078, 0, 0.008841099458933157, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.003517770330120865, 0, -0.01165693977222891, 0, 0, 0, 0.01979543248932361, 0, -0.0005930362028224929, 0.002529858772193303, -0.006214854427030075, 0.03700903442504246, 0.0006898778145518975, -0.001367490522159154, 0.0008987694914710869, 0.003065578016025897, -0.000299778778439971, 0, 0.008421618678215502, 0, -0.01331064471399553, 0, 0.0551847229052732, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0006553387233149811, 0, -0.006677063680888395, 0, 0, 0, 0.0009530139239254953, 0,
        0.01522490286150259, 0, 0, 0, 0, 0, 0, 0, -0.005036883094955755, 0, 0, 0, 0, 0, 0, 0, 0.001730599627692504, 0, 0, 0, -0.003856945504035718, 0, -0.005211875595328013, 0, 0.0001643202796176891, 0.008215221105693287, 0, 0, 0.01664604788259319, 0, -0.01389710032511428, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.0002822911920584292, 0, 0, 0, 0, 0, 0, 0, 0.0044169693140293, 0, 0, 0, 0, 0, -0.007192557651121644, 0, -0.0001274123086281234, 0.008047186419884771, 0, 0, -0.0003100643899153362, 0, 0.01253613924598998, 0,
        0.0005377174333068536, 0.0007923660120542931, -0.005608428649767561, -0.003937692329550179, 0, -0.008398628035646364, 0, 0.02198321632045156, 0, 0, 0, 0, 0, 0, 0, 0, 0.01675142179558909, -0.0002023307959641051, -0.001477941830944552, -0.001535512560722365, 0, 0.003682052115473278, 0, 0, 0, -0.006956351321970245, 0, 0.003747358387415237, 0, 0, 0, 0, 0.0001789065998565082, 0.03027575254075895, 0, -0.004658183343053418, 0, 0, 0, 0, 0, 0, 0, 0.01029446741929013, 0, 0, 0, 0, 0.009389454961896469, -0.01032565009787874, 0, -0.001928764959144465, 0, 0, 0, 0, 0, -0.01509267472896432, -0.00775049511571589, 0.0003240471221360041, 0, 0, 0, 0,
        -0.0003331064359770269, 0.008839960196881231, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.02272072274333372, 0, 0, 0, 0, 0, 0, 0, -0.01092071807454464, 0, 0, 0, 0.007463333708591382, 0, 0, 0, 0.0001627957233360708, -0.001116637623442979, -0.007379211175979748, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0002404427398091648, -0.001723691652186166, 0, 0, 0, 0, 0, 0, -0.008377021072304475, 0, 0, 0, 0.003856654908198184, 0, 0, 0,
        0.0008028646902602903, -0.0004754914440633718, 0.01319488572669197, 0.01053428762759435, -0.007999500149721296, 0.0003761440804843785, -0.009187073994888812, 0, 0.005872686047402129, 0.001673162892789894, 0.003182319652333568, 0.00225633353807273, 0.01903102067619081, -0.00610071344693739, 0, -0.009849033015682978, 0, -0.001039121988190405, 0, 0, 0.01504859125160498, 0.0285932970211463, 0, 0, 0, 0.02433573155296443, 0, -0.02065037524400141, 0, 0.04356295933469208, 0.0006434958264320295, -0.01148723243057018, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.0001134766310378276, 0.0002227980499681638, 0.008232857704678558, -0.006330506547534024, -0.002259790630134647, 0.00199106365901041, -0.004018437572243554, 0, -0.008082858081892677, 0.002514913455152566, 0.008300292645192935, -0.001187622836535111, -0.006363145082013253, 0.001477876801294749, -0.009151039925314361, -0.00551497605842728,
        0.0004549949493772569, 0, 0, 0, -0.01120362678690161, 0, 0, 0, 0.0009954729359899369, -0.002349965085611282, 0, 0.002254628869955109, 0.003543578427208134, -0.002131249831068344, -0.009997856843370272, 0.006833221079645638, 0.01717332650721642, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.0003716334463824579, 0, 0, 0, -0.00742011418177201, 0, 0, 0, 0.001193686670580052, 0.005314193529619648, -0.01116110217091786, 0.007462234082804556, 0, 0.001411486551382843, 0, 0.003716133866264958, -0.0002179837515225209, 0, 0, 0, -0.004853203481220433, 0, 0, 0, 0.01871816037635664, 0, 0, 0, 0, 0, 0, 0,
        -0.01040480854354361, -0.008089658768309032, 0.006198381017114075, 0, 0.01175625328850648, 0, -0.003907636736348256, -0.002547448496179022, 0.006014265928166362, -0.003491092951895182, 0.01601271802276607, -0.004339929871932654, -0.01302497359260098, -0.009342181753842363, 0.001433455805850742, -0.0008619608517058487, -0.0005585026592949336, 4.44082601996819e-05, 0.00291991860605243, 0.01255434634195237, 0.006045002111139765, -0.01510123845551069, -0.0001438934217307319, -0.006340080389237793, -0.004298936059317931, 0, -0.00258562222184581, 0.0002909680532826988, 0, 0, -0.0004483822043321842, 0.00880007733625302, -0.007445417541785019, 0.01265217609861121, -0.003105115692191025, 0.006231492974918152, 0.02562416991957533, 0, -0.00190741082271267, 0.01293827432251416, 0.01121567166426595, -0.01256630260787531, -0.004163463961075958, 0.005635263356409307, -0.01365547366009558, 0, -0.001502035750939068, -9.813684429358279e-06, 0.001066497168158513, -0.01554937791724192, 0.007484305900317935, 0.00891744182348481, 0.004041609577282612, -0.004204969950719826, -0.0006265525613921671, 0.0004447446908523637, 0.008950036405286327, 0, -0.002412544757794123, 0, 0, 0, -0.001095124175674701, -0.01053507460613078,
        -0.008365150125727729, 0.00134899204076143, 0.003854038677677481, 0.0001286727273368942, -0.005258318030744042, -0.0002300400908144708, 0.01326519371230094, -0.001554068588583665, 0.001531000501317254, 0.002791640532855339, -0.0009078005079626248, 0.003573481240601515, -0.010040888303663, 0.0007186067512933873, 0.01286117448590391, -0.0003752932549590257, -0.007637954025685964, 0.002008406314492463, -0.004220830922844628, -4.886689000965604e-05, 0, 0.005302670032485325, 0, 0.007512444134917336, 0, -0.01990965371182861, 0.003741405546622587, 0.01040431644208065, 0, -0.005953873492682412, 0, 0.003036331874682325, 0.0008592696692061118, -0.0006483440096544471, -0.00368553835355908, -0.003129050902546565, -0.008328142405115724, 0.001453516153306713, 0.03095728669919319, -0.0006792589233190283, -0.002522452497490028, 0.0007671878678909537, -0.008431178644436172, 0.005878234492949152, -0.01254058031822249, 0.003288431501608459, 0.003944125975434074, -0.004746877575382919, 0.001645246068700839, -0.002635517800483342, 0.004765378537546173, -0.002241132131981632, 0, 0.02239367146155119, 0, -0.003348088461550959, 0, 0.01117251931308212, 0, -0.002192493215313989, -0.002455064238264959, -0.01481427443738154, 0.001201011684913105, -0.002886832095386217,
        0.003625694040047229, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3.767489591101208e-05, 0.005909046387197556, -0.005163913700946565, 0, 0.003944212175214828, 0, 0, 0, 0.004076141437626588, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.007831310012942792, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        -0.001706835089448218, 0.001334129555383849, 0, 0, -0.006791541971908812, 0, 0, 0, 0.007233870291479624, -0.006326070202838777, 0, 0, 0.02071109678491828, -0.006375305346212863, 0, 0, 0.00681265914169795, -0.0164306688239785, 0, 0, 0.007308415888207517, 0, 0, 0, 0, -0.01239616220283771, 0, 0, -0.01049066618772135, 0.01493162166763949, 0, -0.01034718659178533, 0.001090620760056205, -0.0005892362767704262, 0, 0, -0.003335943651775768, 0.002603123148088608, 0, 0, 0.0007609793434192958, -0.006367877507755641, 0.01098931658866937, -0.006107335436923826, 0.006178772803327988, 0.002385718218481111, -0.01987074387033021, 0.02083403185081778, 0.008941510985225158, 0.0004920840292869129, 0, 0, -0.00357795639680224, 0.002605237999969622, 0, 0, -0.009544066629740049, -0.001372829258266125, 0, 0, 0.00184691516375326, -0.003173451199573447, -0.004670203313442481, 0.0102834948973251,
        0.0009059384543757378, 0.01667715948707724, -0.002628530689798847, -0.007962243911921798, 0.005141283200819598, 0, -4.270492739336219e-05, 0.003820155755705653, 0, 0, 0, 0, 0, 0, 0, 0, -0.001814758646820828, 0, -0.01420867725565106, 0, 0, 0, 0.02127967653799925, 0, -0.0006280557402357972, 0, 0.002860888553156033, -0.002865335898880799, 0, 0, -0.005886759350269123, 0.02251328260218821, 0.0034666449534199, 0, -0.01260239867993204, -0.009761126414207196, 0, 0, -0.01240960687204211, -0.0003322691669222348, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.007367818690943207, 0, 0, 0, 0, 0, 0, 0, 0.01156257621278968, 0, 0, 0, 0.009906502821792697, -0.001283514171546393,
        -0.01023070348489704, 0.005848524902255405, 0.004385320538816686, -0.004115602040290457, -0.002085131607008415, -0.003804357673681641, -0.002710203342994726, -0.002089282645782872, -0.004119038012161336, -0.01119351369339711, -6.1217467452607e-05, -0.001378429954707676, 0.005968834358542245, 0.02761976099605404, -0.001272804088482613, -0.000480710212158101, -0.008428192466276112, 0.007630969339529134, 0.009982193959473685, -0.005784017234700492, 0, -0.009277550757019611, 0.009355302694951525, -0.007410492138016582, -0.004979144080780236, 0.00434688561496593, 0.003862980965024748, -0.0008094302933944524, -0.006354700017479014, 0.004092089718556332, 0.002406152134058744, 0.0006623920617081136, 0.008077369674140788, 0.004088097621146499, 0.002547402203073526, -0.003939510664713376, 0.008629400426847719, -0.0001676134328769046, 0.003276472140838486, 0.002271894601029417, -0.007717498561592148, 0.001239213053329094, 0.00848982464966337, 0.003181476816917006, -0.003055934146675649, 0, -0.007086312687854097, 0.00439967728838742, -0.002171287798548927, 0, 0.005133733491040127, -0.00342126512558979, 0, -0.005440370243233044, 0.003362657772598104, -0.009053640676489174, -0.006038547620823388, 0.001192185407402022, -0.0006815712681065487, -0.004359292176603093, 0.007206487825082243, 0.001063339788168949, -0.01134050515780453, 0.004476206208999516,
        0.00131387062293409, -0.002669531681823152, -2.081540231753799e-05, -0.003421278268196714, 0.01983683380721346, 0, -9.549102483717222e-05, -0.00529610040893223, -0.003404670945893293, -0.001672837640190612, -0.001934476746242464, 0, 0.001680058119073043, 0, -0.005041444483348333, 0, -0.001420675056601151, 0, -0.002119308434500784, 0, 0.001821229734005226, 0, 4.211059132066744e-05, 0, 0.0007037327654261229, 0, 0.01421762717843778, 0, 0, 0, -0.001521475855509106, 0, -0.001055573951884252, 0, -0.00152247121738688, 0, 0, 0, -0.004217739757511519, -0.002517370317524928, -0.003177454480044745, 0, 0.01439291951443426, 0, 0, 0, -0.01046717705076441, 0, 0.0238084146868666, 0, 0.002398973354159769, 0, 0, 0, 0.000866227511346285, 0, 0.0088095174747798, 0, 0.008118243575822248, 0, 0, 0, 0, 0,
        0.001097264049127584, -0.005312793071539105, -0.001732719282296298, 0.01173913934161362, 0, 0, 0.01057657480065836, 0, -0.001897651746641786, 0, -0.004473152841086889, 0, 0, 0, 0.002650140203621314, 0, -0.003422687906240259, -0.006496979296460312, 0.004023901161255895, 0, 0.01470237471023107, 0, -0.002834793185713817, 0, 0.004756889183012037, 0, -0.005921876792630116, 0, 0.005586773266132282, 0, -0.001038040792346972, 0, -0.001647774538413473, -0.001217056803747172, 0.001515230788375151, 0, 0, 0, 0, 0, 0.00367901297584281, -0.002405447202176707, 0, 0, 0, 0, 0, 0, -0.006911205961530274, 0.0001230176571044002, -0.003063474716460378, 0, 0, 0, 0, 0, 0.02903822275898219, 0, -0.004074579833045394, 0, 0, 0, 0.000287104102377797, 0,
        -0.0007401325357158481, 0, 0, 0, 2.89411182746112e-05, 0, 0, 0, 0.005055972404588714, 0, -0.001400021908863787, -0.0009655656987087799, -0.006047758077086314, 0.01027715630245713, 0.01027676724828841, 0.0005121092919215199, 0.0008464109161278646, 0, 0, 0, 8.240478083817929e-07, 0, 0, 0, -0.005559123239646775, 0.009786085273350538, -0.008611521720272628, -0.002519302984512985, 0.002640400411274754, 0, 0.008371828337477173, 0, 0.00826070477239314, 0, 0, 0, 0.00146014535032056, 0, 0, 0, 0, 0.002757783182193987, 0, 0, 0, 0, 0, 0, -0.005283187602797728, 0, 0, 0, 0.005529289380071294, 0, 0, 0, 0.009289656718805153, 0, -0.003343274810169872, 0, 0, 0, 0, 0,
        7.785312271221677e-05, 0.004769722301715159, -0.009221506270693817, 0, -0.003332462996416667, 0, 0.005204549971974626, 0, 0.005585652736366735, 0, 0, 0, -0.0008046600974696449, 0, -0.0004247427353369234, 0
    ]
    scale = 1
    bias = 0.06050201133
cat_features_hashes = {
}

def hash_uint64(string):
    return cat_features_hashes.get(str(string), 0x7fFFffFF)


### Applicator for the CatBoost model

def apply_catboost_model(float_features, cat_features=[], ntree_start=0, ntree_end=catboost_model.tree_count):
    """
    Applies the model built by CatBoost.

    Parameters
    ----------

    float_features : list of float features

    cat_features : list of categorical features
        You need to pass float and categorical features separately in the same order they appeared in train dataset.
        For example if you had features f1,f2,f3,f4, where f2 and f4 were considered categorical, you need to pass here float_features=f1,f3, cat_features=f2,f4


    Returns
    -------
    prediction : formula value for the model and the features

    """
    if ntree_end == 0:
        ntree_end = catboost_model.tree_count
    else:
        ntree_end = min(ntree_end, catboost_model.tree_count)

    model = catboost_model

    assert len(float_features) >= model.float_feature_count
    assert len(cat_features) >= model.cat_feature_count

    # Binarise features
    binary_features = [0] * model.binary_feature_count
    binary_feature_index = 0

    for i in range(len(model.float_feature_borders)):
        for border in model.float_feature_borders[i]:
            binary_features[binary_feature_index] += 1 if (float_features[model.float_features_index[i]] > border) else 0
        binary_feature_index += 1
    transposed_hash = [0] * model.cat_feature_count
    for i in range(model.cat_feature_count):
        transposed_hash[i] = hash_uint64(cat_features[i])

    if len(model.one_hot_cat_feature_index) > 0:
        cat_feature_packed_indexes = {}
        for i in range(model.cat_feature_count):
            cat_feature_packed_indexes[model.cat_features_index[i]] = i
        for i in range(len(model.one_hot_cat_feature_index)):
            cat_idx = cat_feature_packed_indexes[model.one_hot_cat_feature_index[i]]
            hash = transposed_hash[cat_idx]
            for border_idx in range(len(model.one_hot_hash_values[i])):
                binary_features[binary_feature_index] |= (1 if hash == model.one_hot_hash_values[i][border_idx] else 0) * (border_idx + 1)
            binary_feature_index += 1

    if hasattr(model, 'model_ctrs') and model.model_ctrs.used_model_ctrs_count > 0:
        ctrs = [0.] * model.model_ctrs.used_model_ctrs_count;
        calc_ctrs(model.model_ctrs, binary_features, transposed_hash, ctrs)
        for i in range(len(model.ctr_feature_borders)):
            for border in model.ctr_feature_borders[i]:
                binary_features[binary_feature_index] += 1 if ctrs[i] > border else 0
            binary_feature_index += 1

    # Extract and sum values from trees
    result = 0.
    tree_splits_index = 0
    current_tree_leaf_values_index = 0
    for tree_id in range(ntree_start, ntree_end):
        current_tree_depth = model.tree_depth[tree_id]
        index = 0
        for depth in range(current_tree_depth):
            border_val = model.tree_split_border[tree_splits_index + depth]
            feature_index = model.tree_split_feature_index[tree_splits_index + depth]
            xor_mask = model.tree_split_xor_mask[tree_splits_index + depth]
            index |= ((binary_features[feature_index] ^ xor_mask) >= border_val) << depth
        result += model.leaf_values[current_tree_leaf_values_index + index]
        tree_splits_index += current_tree_depth
        current_tree_leaf_values_index += (1 << current_tree_depth)
    return model.scale * result + model.bias



